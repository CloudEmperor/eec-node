webpackJsonp([118],{cNxc:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("aA9S"),l=i.n(s),a={data:function(){return{icon:"el-icon-refresh",formLabelWidth:"120px",dialogFormVisible:!1,dialogVisible:!1,uploadDisabled:!1,uploadUrl:"",active:1,listQuery:{},form:{templateName:"",assessmentTemplate:""},options:[],tableData:[],total:0,title:"添加预警反馈模板",rules:{templateName:[{required:!0,message:"请输入模板名称",trigger:"blur"}],assessmentTemplate:[{required:!0,message:"请输入模板内容",trigger:"blur"}]},loading:!1,bodyLoading:!0}},mounted:function(){this.getList()},methods:{getList:function(){var t=this;this.bodyLoading=!0,this.$post("/basic/feedbacktemplate/list").then(function(e){t.bodyLoading=!1,1===e.status&&(t.tableData=e.data)}).catch(function(e){console.log(e),t.bodyLoading=!1})},handleAdd:function(){var t=this;this.dialogFormVisible=!0,this.title="添加预警反馈模板",this.$nextTick(function(){t.$refs.form.resetFields()})},handleEdit:function(t){var e=this;this.dialogFormVisible=!0,this.title="编辑预警反馈模板",this.$nextTick(function(){e.$refs.form.resetFields(),e.form=l()({},t)})},handleDelete:function(t){var e=this;this.$confirm("此操作将删除该预警反馈模板, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$post("/basic/feedbacktemplate/del/"+t.id).then(function(t){e.$notify({title:"提示",message:t.message,type:"success",duration:"2000"}),e.getList()}).catch(function(t){console.log(t),e.loading=!1})}).catch(function(){})},handleSizeChange:function(t){this.listQuery.rows=t,this.getList()},handleCurrentChange:function(t){this.listQuery.page=t,this.getList()},submitForm:function(){var t=this;this.loading=!0,this.$refs.form.validate(function(e){e?t.$post("/basic/feedbacktemplate/add",t.form).then(function(e){t.$notify({title:"提示",message:e.message,type:"success",duration:"2000"}),t.dialogFormVisible=!1,t.loading=!1,t.getList()}).catch(function(e){console.log(e),t.loading=!1}):t.loading=!1})},editForm:function(){var t=this;this.$refs.form.validate(function(e){e?t.$post("/basic/feedbacktemplate/edit",t.form).then(function(e){t.$notify({title:"提示",message:e.message,type:"success",duration:"2000"}),t.dialogFormVisible=!1,t.loading=!1,t.getList()}).catch(function(e){console.log(e),t.loading=!1}):t.loading=!1})},handleClick:function(){this.uploadDisabled=!1},handleExport:function(){var t=this;this.active=1,this.dialogVisible=!0;localStorage.getItem("x_token");this.$nextTick(function(){t.$refs.uploadXls.clearFiles()})},handleExceed:function(t,e){this.$notify.warning({title:"提示",message:"当前限制选择 1 个文件，本次选择了 "+t.length+" 个文件，共选择了 "+(t.length+e.length)+" 个文件"})},onProgress:function(){this.active=2,this.uploadDisabled=!0},handleSuccess:function(t){var e=this;console.log(t),1===t.status?(this.$notify.success({title:"提示",message:"导入成功!"}),this.active=3,this.uploadDisabled=!1):(console.log(t),this.active=1,this.uploadDisabled=!1),this.$nextTick(function(){e.$refs.uploadXls.clearFiles()})},onError:function(){var t=this;this.$notify.error({title:"提示",message:"上传失败!请尝试重新上传!"}),this.active=1,this.uploadDisabled=!1,this.$nextTick(function(){t.$refs.uploadXls.clearFiles()})}}},o={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"loading",rawName:"v-loading.body",value:t.bodyLoading,expression:"bodyLoading",modifiers:{body:!0}}],staticClass:"warningTemplate"},[i("div",{staticClass:"mainContainer"},[i("div",[i("crumb",{staticStyle:{padding:"0 5px"}},[i("div",{staticClass:"new--btn",attrs:{slot:"right"},on:{click:t.handleAdd},slot:"right"},[t._v("+ 新建")])])],1),t._v(" "),i("div",{staticClass:"tableBody"},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,stripe:""}},[i("el-table-column",{attrs:{label:"编号",type:"index",width:"50"}}),t._v(" "),i("el-table-column",{attrs:{prop:"templateName",label:"模板名称",width:"200"}}),t._v(" "),i("el-table-column",{attrs:{prop:"assessmentTemplate",label:"模板内容"}}),t._v(" "),i("el-table-column",{attrs:{label:"操作",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return t.handleEdit(e.row)}}},[i("SvgIcon",{attrs:{"icon-class":"iconbianji1"}}),t._v("  编辑\n            ")],1),t._v(" "),i("el-button",{staticStyle:{color:"#ff5858"},attrs:{type:"text",size:"small"},on:{click:function(i){return t.handleDelete(e.row)}}},[i("SvgIcon",{attrs:{"icon-class":"iconshanchu"}}),t._v("  删除\n            ")],1)]}}])})],1)],1)]),t._v(" "),i("el-dialog",{attrs:{title:t.title,visible:t.dialogFormVisible,"close-on-click-modal":!1,width:"40%"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[i("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"120px"}},[i("el-form-item",{attrs:{label:"模板名称：",prop:"templateName"}},[i("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入模板名称",size:"small"},model:{value:t.form.templateName,callback:function(e){t.$set(t.form,"templateName",e)},expression:"form.templateName"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"模板内容：",prop:"assessmentTemplate"}},[i("el-input",{staticStyle:{"font-size":"14px"},attrs:{"auto-complete":"off",placeholder:"请输入模板内容",size:"small",type:"textarea",rows:5,resize:"none"},model:{value:t.form.assessmentTemplate,callback:function(e){t.$set(t.form,"assessmentTemplate",e)},expression:"form.assessmentTemplate"}})],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{directives:[{name:"show",rawName:"v-show",value:"添加预警反馈模板"===t.title,expression:"title==='添加预警反馈模板'"}],attrs:{type:"primary",loading:t.loading},on:{click:function(e){return t.submitForm("form")}}},[t._v("确 定")]),t._v(" "),i("el-button",{directives:[{name:"show",rawName:"v-show",value:"添加预警反馈模板"!==t.title,expression:"title!=='添加预警反馈模板'"}],attrs:{type:"primary",loading:t.loading},on:{click:function(e){return t.editForm("form")}}},[t._v("确 定")])],1)],1),t._v(" "),i("el-dialog",{staticClass:"set-el-dialog set-course-dialog",attrs:{title:"导入数据",visible:t.dialogVisible,width:"35%","close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("div",{staticStyle:{height:"400px"}},[i("div",{staticStyle:{height:"400px","min-width":"280px",width:"50%",float:"left"}},[i("el-steps",{attrs:{direction:"vertical",active:t.active}},[i("el-step",{attrs:{title:"上传文件",icon:"el-icon-upload"}}),t._v(" "),i("el-step",{attrs:{title:"检查数据",icon:t.icon,description:"等待文件上传完毕后自动检查表格数据。"}}),t._v(" "),i("el-step",{attrs:{title:"完成",icon:"el-icon-success"}})],1)],1),t._v(" "),i("div",{staticStyle:{position:"absolute",top:"105px",left:"85px"}},[i("p",{staticStyle:{padding:"10px 0","font-size":"12px"}},[t._v("导入数据前，请先下载模板，按照模板格式录入数据。")]),t._v(" "),i("div",{staticClass:"file-upload"},[i("el-upload",{ref:"uploadXls",staticClass:"upload-demo",attrs:{disabled:t.uploadDisabled,action:t.uploadUrl,"on-success":t.handleSuccess,"on-progress":t.onProgress,"on-error":t.onError,limit:1,"show-file-list":!1,accept:".xls,.xlsx",name:"file","on-exceed":t.handleExceed}},[i("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.handleClick}},[i("i",{staticClass:"el-icon-upload el-icon--right"}),t._v("  上传文件")]),t._v(" "),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("支持文件格式：.xls .xlsx。")])],1)],1)])])])],1)},staticRenderFns:[]};var n=i("C7Lr")(a,o,!1,function(t){i("wdCH")},null,null);e.default=n.exports},wdCH:function(t,e){}});
//# sourceMappingURL=118.3af939f4e6e89aac6339.js.map