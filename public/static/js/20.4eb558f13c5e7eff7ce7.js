webpackJsonp([20],{DBSd:function(t,e){},HHnF:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a("Gwkq");var i={name:"CollegeStudent",components:{echarts5:a("kQIM").a},data:function(){return{activeIndex:0,activeIndexTwo:0,topActiveIndex:0,topActiveIndex1:0,nameTips:"工程知识",seriesBarData:{},options:[],topOptions:[],topOptions1:[],yearOptions:[],termOptions:[{name:"全部",id:"0"},{name:"第一学期",id:"1"},{name:"第二学期",id:"2"}],pointOption:{},tableData:[],total:0,page:{year:"",term:"",page:1,rows:15},xuerowifon:{},avgRatioList:[],tremid:"",gradeifon:"",tremifon:"",getgrade:0,name:""}},created:function(){this.initData(),this.studentAnalyze(),this.getgrade=this.$route.query.row.grade},mounted:function(){this.grades()},methods:{grades:function(){var t=this;this.$get("/basic/scheduling/grades/"+this.$route.query.specialtyId).then(function(e){1==e.status&&(t.yearOptions=e.data)})},studentAnalyze:function(){var t=this;this.$get("/basic/specialty/portrayal/studentAnalyze?studentId="+this.$route.query.row.id).then(function(e){1==e.status&&(t.xuerowifon=e.data.sutdent,t.options=e.data.grademap.yearTerm,t.topOptions=e.data.grademap.claims,t.topOptions1=e.data.grademap.claims,t.gettopOptions(t.options[0].term,t.topOptions[0].id,t.$route.query.row.grade),setTimeout(function(){t.getportrayal(t.options[0].term,t.$route.query.row.grade)},400),t.gradeifon=t.options[0].grade+"-"+Number(t.options[0].grade+1),t.tremifon="一")})},gettopOptions:function(t,e,a){var i=this,s=a;this.$get("/basic/specialty/portrayal/courseSocreByGraduationId/"+e+"/"+s+"/"+t+"/"+this.$route.query.row.id).then(function(t){if(1===t.status){var e=["我的分值","平均值","目标值"],a={legendData:e,xAxisData:t.data.name.split(",").map(function(t){return"指标点"+t}),seriesData:e.map(function(t){return{name:t,barGap:"0",data:[]}})};a.seriesData[0].data=t.data.ratio.split(","),a.seriesData[1].data=t.data.avgRatioStr.split(","),a.seriesData[2].data=t.data.targetRatioStr.split(","),i.seriesBarData=a}})},getportrayal:function(t,e){var a=this,i=e||this.$route.query.row.grade;this.$get("/basic/specialty/portrayal/earlyWarning/"+this.$route.query.versionId+"/"+i+"/"+t+"/"+this.$route.query.row.id).then(function(t){console.log(t,"能力预警"),a.pointOption=t.data})},changeyear:function(){this.initData(this.page.year,this.page.term)},changeterm:function(){this.initData(this.page.year,this.page.term)},initData:function(t,e){var a=this,i={page:this.page.page,rows:this.page.rows,studentId:this.$route.query.row.id,grade:t,term:e};this.$post("/basic/specialty/portrayal/studentCourse",i).then(function(t){1==t.status&&(a.tableData=t.data.list,a.total=Number(t.data.total))})},tabClick:function(t,e,a){0===e?(this.activeIndex=t,this.tremid=a.term,this.getgrade=a.grade||this.$route.query.row.grade,this.gettopOptions(a.term,this.topOptions[0].id,this.getgrade)):(this.getgrade=a.grade||this.$route.query.row.grade,this.getportrayal(a.term,this.getgrade),2==a.term?(this.gradeifon=a.grade+"-"+Number(a.grade+1),this.tremifon="二"):1==a.term&&(this.gradeifon=a.grade+"-"+Number(a.grade+1),this.tremifon="一"),this.activeIndexTwo=t,this.tremid=a.term)},topClick:function(t,e){this.gettopOptions(this.options[0].term,t.id,this.getgrade),this.nameTips=t.name,this.topActiveIndex=e},handleSizeChange:function(t){this.page.rows=t,this.initData()},handleCurrentChange:function(t){this.page.page=t,this.initData()},goback:function(){window.history.back(-1)}}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"college-full-screen college"},[a("div",{staticClass:"college_content"},[a("div",{staticClass:"cl-student_head"},[a("span",{staticClass:"cl-back",on:{click:t.goback}},[a("i",{staticClass:"el-icon-back",staticStyle:{color:"#b0f9e0"}}),t._v(" "),a("span",[t._v("返回列表")])]),t._v(" "),a("label",[t._v(t._s(t.xuerowifon.name)+"跟踪分析报告")])]),t._v(" "),a("div",{staticClass:"cl-student_info cl-box"},[a("h5",{staticClass:"cl-text"},[t._v("学生信息")]),t._v(" "),a("ul",[a("li",{staticClass:"cl-text"},[t._v("姓名："+t._s(t.xuerowifon.name))]),t._v(" "),a("li",{staticClass:"cl-text"},[t._v("学号："+t._s(t.xuerowifon.code))]),t._v(" "),a("li",{staticClass:"cl-text"},[t._v("所属学院："+t._s(t.xuerowifon.academy_name))]),t._v(" "),a("li",{staticClass:"cl-text"},[t._v("所属专业："+t._s(t.xuerowifon.specialty_name))]),t._v(" "),a("li",{staticClass:"cl-text"},[t._v("所属班级："+t._s(t.xuerowifon.class_name))]),t._v(" "),a("li",{staticClass:"cl-text"},[t._v("入学年份："+t._s(t.xuerowifon.grade))]),t._v(" "),a("li",{staticClass:"cl-text"},[t._v("培养方案版本："+t._s(t.xuerowifon.versionName))])])]),t._v(" "),t._m(0),t._v(" "),a("div",{staticClass:"cl-student_content cl-box"},[a("div",{staticClass:"cl-student_content_side"},[a("ul",t._l(t.options,function(e,i){return a("li",{key:i,staticClass:"cl-side-text",class:{active:t.activeIndex===i},on:{click:function(a){return t.tabClick(i,0,e)}}},[2==e.term?a("span",[t._v(t._s(e.grade)+"-"+t._s(e.grade+1)+"学年 第二学期")]):t._e(),t._v(" "),1==e.term?a("span",[t._v(t._s(e.grade)+"-"+t._s(e.grade+1)+"学年 第一学期")]):t._e()])}),0)]),t._v(" "),a("div",{staticClass:"cl-student_content_main"},[0!==t.topOptions.length?a("div",{staticClass:"student_content_main_top"},[a("ul",t._l(t.topOptions,function(e,i){return a("li",{key:i,staticClass:"cl-side-text",class:{topActive:t.topActiveIndex===i},on:{click:function(a){return t.topClick(e,i)}}},[t._v(t._s(e.name))])}),0)]):t._e(),t._v(" "),a("div",{staticClass:"bar-box"},[a("p",{staticClass:"title-tips cl-text"},[a("label",[t._v("毕业要求：")]),t._v(t._s(t.nameTips))]),t._v(" "),a("echarts5",{attrs:{id:"sbilityQueryBar","series-bar-data":t.seriesBarData,isMax:!0,isMin:!0,chartHeight:"200px"}})],1)])]),t._v(" "),t._m(1),t._v(" "),a("div",{staticClass:"cl-student_content cl-box"},[a("div",{staticClass:"cl-student_content_side"},[a("ul",t._l(t.options,function(e,i){return a("li",{key:i,staticClass:"cl-side-text",class:{active:t.activeIndexTwo===i},on:{click:function(a){return t.tabClick(i,1,e)}}},[2==e.term?a("span",[t._v(t._s(e.grade)+"-"+t._s(e.grade+1)+"学年 第二学期")]):t._e(),t._v(" "),1==e.term?a("span",[t._v(t._s(e.grade)+"-"+t._s(e.grade+1)+"学年 第一学期")]):t._e()])}),0)]),t._v(" "),a("div",{staticClass:"cl-student_content_main"},[a("h5",{staticClass:"cl-text"},[t._v(t._s(t.gradeifon)+"学年第"+t._s(t.tremifon)+"学期能力达成情况分析预警")]),t._v(" "),a("ul",{staticClass:"cl-student-point"},[a("li",{staticClass:"cl-student-point_li"},[t.pointOption.type1?a("div",{staticStyle:{overflow:"hidden","margin-bottom":"15px"}},[a("div",{staticClass:"cl-student-point_left"},[t.pointOption.type1?a("SvgIcon",{attrs:{"icon-class":"icontongguo",size:"40px"}}):t._e()],1),t._v(" "),a("div",{staticClass:"cl-student-point_right"},[a("p",{staticStyle:{"font-size":"14px","font-family":"PingFang SC","font-weight":"bold",color:"rgba(3,177,135,1)"}},[t._v(t._s(t.pointOption.type1.split(",").join("， ")))]),t._v(" "),t.pointOption.type1?a("span",{staticClass:"cl-text",staticStyle:{"line-height":"20px"}},[t._v(t._s(t.pointOption.returnFeedback1.split(",").join("， ")))]):t._e()])]):t._e(),t._v(" "),t.pointOption.type2?a("div",{staticStyle:{overflow:"hidden","margin-bottom":"15px"}},[a("div",{staticClass:"cl-student-point_left"},[t.pointOption.type2?a("SvgIcon",{attrs:{"icon-class":"iconzhuyi",size:"40px"}}):t._e()],1),t._v(" "),a("div",{staticClass:"cl-student-point_right"},[a("p",{staticStyle:{"font-size":"14px","font-family":"PingFang SC","font-weight":"bold",color:"rgba(255,143,68,1)"}},[t._v(t._s(t.pointOption.type2.split(",").join("， ")))]),t._v(" "),t.pointOption.type2?a("span",{staticClass:"cl-text",staticStyle:{"line-height":"20px"}},[t._v(t._s(t.pointOption.returnFeedback2.split(",").join("， ")))]):t._e()])]):t._e(),t._v(" "),t.pointOption.type3?a("div",{staticStyle:{overflow:"hidden","margin-bottom":"15px"}},[a("div",{staticClass:"cl-student-point_left"},[t.pointOption.type3?a("SvgIcon",{attrs:{"icon-class":"iconzhuyi-hongse",size:"40px"}}):t._e()],1),t._v(" "),a("div",{staticClass:"cl-student-point_right"},[a("p",{staticStyle:{"font-size":"14px","font-family":"PingFang SC","font-weight":"bold",color:"rgba(255,94,98,1)"}},[t._v(t._s(t.pointOption.type3.split(",").join("， ")))]),t._v(" "),t.pointOption.type3?a("span",{staticClass:"cl-text",staticStyle:{"line-height":"20px"}},[t._v(t._s(t.pointOption.returnFeedback3.split(",").join("， ")))]):t._e()])]):t._e()])])])]),t._v(" "),a("div",{staticClass:"college_search"},[t._m(2),t._v(" "),a("div",{staticClass:"college_search_rt"},[a("el-select",{staticClass:"new-select",attrs:{filterable:"",placeholder:"请选择学年"},on:{change:t.changeyear},model:{value:t.page.year,callback:function(e){t.$set(t.page,"year",e)},expression:"page.year"}},t._l(t.yearOptions,function(t){return a("el-option",{key:t,attrs:{label:t+" - "+(t+1)+"学年",value:t}})}),1),t._v(" "),a("el-select",{attrs:{filterable:"",placeholder:"请选择学期"},on:{change:t.changeterm},model:{value:t.page.term,callback:function(e){t.$set(t.page,"term",e)},expression:"page.term"}},t._l(t.termOptions,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1)]),t._v(" "),a("div",{staticClass:"college_tabel cl-tabel"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,stripe:""}},[a("el-table-column",{attrs:{prop:"courseName",label:"课程"}}),t._v(" "),a("el-table-column",{attrs:{prop:"teacherName",label:"代课老师"}}),t._v(" "),a("el-table-column",{attrs:{prop:"grade",label:"学年"}}),t._v(" "),a("el-table-column",{attrs:{prop:"term",label:"学期"}}),t._v(" "),a("el-table-column",{attrs:{prop:"comment",label:"指导内容"}})],1),t._v(" "),a("div",{staticClass:"college_pagination"},[a("el-pagination",{attrs:{background:"","current-page":t.page.page,"page-sizes":[15,30,40,50],"page-size":t.page.rows,layout:"prev, pager, next, jumper, sizes, total",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"college_search"},[e("div",{staticClass:"college_search_lf"},[e("span",{staticClass:"cl-btn"},[this._v("能力达成概况")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"college_search"},[e("div",{staticClass:"college_search_lf"},[e("span",{staticClass:"cl-btn"},[this._v("预警记录")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"college_search_lf"},[e("span",{staticClass:"cl-btn"},[this._v("指导记录")])])}]};var n=a("C7Lr")(i,s,!1,function(t){a("DBSd")},null,null);e.default=n.exports},Ou4a:function(t,e){},kQIM:function(t,e,a){"use strict";var i=a("aA9S"),s=a.n(i),n=a("3cXf"),o=a.n(n),r=a("WCPx"),l=a.n(r),c={name:"SeriesBar",props:{id:{type:String,default:"seriesBar"},chartHeight:{type:String,default:"300px"},chartWidth:{type:String,default:"100%"},seriesBarData:{type:Object,default:function(){return{}}},color:{type:Array,default:function(){return["#38A0FF","#4CCA73","#F9D337"]}},gradual:{type:Array,default:function(){return[{color:"#03B187",gradual:"#8EE9CA"},{color:"#FFA351",gradual:"#FFE098"},{color:"#5AB3FF",gradual:"#B3DCFF"},{color:"#ECEAFF",gradual:"#D5CFFF"}]}},labelShow:{type:Boolean,default:!1},isMax:{type:Boolean,default:!1},isMin:{type:Boolean,default:!1}},data:function(){return{chart:null,labelOption:{normal:{show:!1,position:"insideBottom",distance:15,align:"left",verticalAlign:"middle",rotate:90,formatter:"{c}",fontSize:12,rich:{name:{textBorderColor:"#fff"}}}}}},created:function(){},mounted:function(){this.initChart()},watch:{seriesBarData:function(t,e){this.initChart()}},methods:{initChart:function(){var t=this;t.chart=l.a.init(document.getElementById(t.id)),t.chart.setOption(t.getSeriesBarOption()),window.addEventListener("resize",function(){t.chart&&t.chart.resize()})},getSeriesBarOption:function(){return this.labelOption.normal.show=this.labelShow,{color:this.color,tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{x:"70%",data:this.seriesBarData.legendData||[],textStyle:{color:"#aaa"}},grid:{bottom:"10%",left:"5%",right:"5%"},toolbox:{show:!0,feature:{saveAsImage:{show:!0,excludeComponents:["toolbox"],pixelRatio:2}}},calculable:!0,xAxis:[{type:"category",axisLine:{show:!1,lineStyle:{color:"#aaa"}},axisTick:{show:!1},data:this.seriesBarData.xAxisData||[],axisLabel:{interval:0,rotate:0}}],yAxis:[{type:"value",axisLine:{show:!1,lineStyle:{color:"#aaa"}},axisTick:{show:!1},min:this.isMax?function(t){return 0}:void 0,max:this.isMax?function(t){return 1}:void 0}],series:this.seriesInitFn()}},seriesInitFn:function(){function t(){return"#"+("00000"+parseInt(Math.random()*Math.pow(32,4)).toString(16)).substr(-4)}var e=JSON.parse(o()(this.seriesBarData.seriesData||[])),a={type:"bar",barWidth:30,label:this.labelOption},i=this.gradual;if(this.gradual.length<e.length)for(var n=e.length-this.gradual.length,r=0;r<n;r++)i.push({color:t(),gradual:t()});return e.forEach(function(t,e){t.barGap="0",t.itemStyle={normal:{color:new l.a.graphic.LinearGradient(0,0,0,1,[{offset:0,color:i[e].gradual},{offset:1,color:i[e].color}],!1)}},s()(t,a)}),e}},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)}},d={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"seriesBar",style:{height:this.chartHeight,width:this.chartWidth},attrs:{id:this.id}})},staticRenderFns:[]};var p=a("C7Lr")(c,d,!1,function(t){a("Ou4a")},"data-v-23b1bc82",null);e.a=p.exports}});
//# sourceMappingURL=20.4eb558f13c5e7eff7ce7.js.map