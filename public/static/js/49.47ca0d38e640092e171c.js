webpackJsonp([49],{QV1q:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("aA9S"),o=a.n(i),s={components:{Crumb:a("fcG9").a},data:function(){return{icon:"el-icon-refresh",formLabelWidth:"120px",dialogFormVisible:!1,dialogVisible:!1,uploadDisabled:!1,uploadUrl:"",active:1,listQuery:{type:"",name:"",page:1,rows:15},form:{type:"",name:"",subordinateUnits:"",age:"",sex:"",email:"",phone:""},options:[{code:"",value:"全部"},{code:1,value:"校内专家"},{code:2,value:"校外专家"}],options1:[{code:1,value:"校内专家"},{code:2,value:"校外专家"}],sexOptions:[{value:0,label:"男"},{value:1,label:"女"}],tableData:[],total:0,title:"添加专家信息",rules:{type:[{required:!0,message:"请选择专家类型",trigger:"change"}],name:[{required:!0,message:"请输入专家名称",trigger:"blur"}],subordinateUnits:[{required:!0,message:"请输入所属单位",trigger:"blur"}],age:[{required:!0,message:"请输入年龄",trigger:"blur"},{type:"number",message:"年龄必须为数字值"}],sex:[{required:!0,message:"请选择性别",trigger:"change"}],email:[{required:!0,message:"请输入联系人邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}],phone:[{required:!0,message:"请输入联系人手机号",trigger:"blur"},{validator:function(e,t,a){""===t?a():/^[1][3,4,5,7,8][0-9]{9}$/.test(t)?a():a(new Error("请输入正确的手机号码"))},trigger:"blur"}]},loading:!1,bodyLoading:!0}},mounted:function(){this.getList(),this.getEnterprise()},methods:{resetListQuery:function(){this.listQuery={type:"",name:"",page:1,rows:15}},getList:function(){var e=this;this.bodyLoading=!0,this.$post("/basic/expertInfo/list",this.listQuery).then(function(t){1===t.status?(e.tableData=t.data,e.total=t.total):e.$notify({title:"提示",message:t.message,type:"error",duration:"2000"}),e.bodyLoading=!1}).catch(function(){e.$notify({title:"提示",message:"获取列表失败请重试!",type:"error",duration:"2000"}),e.bodyLoading=!1})},getEnterprise:function(){var e=this;this.bodyLoading=!0,this.$get("/system/dict/field/expertType").then(function(t){1===t.status?(e.options=o()([],t.data),e.options.unshift({code:"",value:"全部"}),e.options1=o()([],t.data)):e.$notify({title:"提示",message:t.message,type:"error",duration:"2000"}),e.bodyLoading=!1}).catch(function(){e.$notify({title:"提示",message:"获取专家类型失败请重试!",type:"error",duration:"2000"}),e.bodyLoading=!1})},handleAdd:function(){var e=this;this.dialogFormVisible=!0,this.title="添加专家信息",this.$nextTick(function(){e.form={type:"",name:"",subordinateUnits:"",age:"",sex:"",email:"",phone:""},e.$refs.form.resetFields()})},handleEdit:function(e){var t=this;this.dialogFormVisible=!0,this.title="编辑专家信息",this.form={id:e.id,type:e.type,name:e.name,subordinateUnits:e.subordinateUnits,age:e.age,sex:e.sex,email:e.email,phone:e.phone},this.$nextTick(function(){t.$refs.form.clearValidate()})},handleDelete:function(e){var t=this;this.$confirm("此操作将删除该专家信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$post("/basic/expertInfo/del/"+e.id).then(function(e){1===e.status?(t.$notify({title:"提示",message:e.message,type:"success",duration:"2000"}),t.listQuery.page=1,t.getList()):t.$notify({title:"提示",message:e.message,type:"error",duration:"2000"})}).catch(function(){t.$notify({title:"提示",message:"删除失败！请重试！",type:"error",duration:"2000"})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},handleSizeChange:function(e){this.listQuery.rows=e,this.getList()},handleCurrentChange:function(e){this.listQuery.page=e,this.getList()},submitForm:function(e){var t=this;this.loading=!0,this.$refs[e].validate(function(e){if(!e)return t.loading=!1,!1;t.$post("/basic/expertInfo/add",t.form).then(function(e){1===e.status?(t.$notify({title:"提示",message:e.message,type:"success",duration:"2000"}),t.dialogFormVisible=!1,t.resetListQuery(),t.getList()):t.$notify({title:"提示",message:e.message,type:"error",duration:"2000"}),t.loading=!1}).catch(function(){t.loading=!1})})},editForm:function(e){var t=this;this.loading=!0,this.$refs[e].validate(function(e){if(!e)return t.loading=!1,!1;t.$post("/basic/expertInfo/edit",t.form).then(function(e){1===e.status?(t.$notify({title:"提示",message:e.message,type:"success",duration:"2000"}),t.dialogFormVisible=!1,t.resetListQuery(),t.getList()):t.$notify({title:"提示",message:e.message,type:"error",duration:"2000"}),t.loading=!1}).catch(function(){t.loading=!1})})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading.body",value:e.bodyLoading,expression:"bodyLoading",modifiers:{body:!0}}],staticClass:"expertInformation"},[a("div",{staticClass:"mainContainer"},[a("crumb",{staticStyle:{padding:"0 5px"}},[a("div",{staticClass:"new--btn",attrs:{slot:"right"},on:{click:e.handleAdd},slot:"right"},[e._v("+ 新建")])]),e._v(" "),a("div",{staticClass:"listQuery"},[a("el-form",{ref:"listQuery",attrs:{model:e.listQuery,"label-width":"90px"}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"专家类型："}},[a("el-select",{staticStyle:{width:"90%"},attrs:{placeholder:"请选择专家类型"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getList(t)}},model:{value:e.listQuery.type,callback:function(t){e.$set(e.listQuery,"type",t)},expression:"listQuery.type"}},e._l(e.options,function(e){return a("el-option",{key:e.code,attrs:{label:e.value,value:e.code}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"专家姓名："}},[a("el-input",{staticStyle:{width:"90%"},attrs:{placeholder:"请输入专家姓名"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getList(t)}},model:{value:e.listQuery.name,callback:function(t){e.$set(e.listQuery,"name",t)},expression:"listQuery.name"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"search--btn",on:{click:e.getList}},[e._v("搜索")])])],1)],1)],1),e._v(" "),a("div",{staticClass:"tableBody"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""}},[a("el-table-column",{attrs:{prop:"name",label:"专家姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"age",label:"年龄"}}),e._v(" "),a("el-table-column",{attrs:{prop:"subordinateUnits",label:"就职单位"}}),e._v(" "),a("el-table-column",{attrs:{prop:"typeName",label:"专家类型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"手机号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"email",label:"邮箱"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleEdit(t.row)}}},[a("SvgIcon",{attrs:{"icon-class":"iconbianji1"}}),e._v("  编辑\n            ")],1),e._v(" "),a("el-button",{staticStyle:{color:"#ff5858"},attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleDelete(t.row)}}},[a("SvgIcon",{attrs:{"icon-class":"iconshanchu"}}),e._v("  删除\n            ")],1)]}}])})],1)],1),e._v(" "),a("div",{staticClass:"pagination"},[a("div",{staticClass:"block"},[a("el-pagination",{attrs:{background:"","current-page":e.listQuery.page,"page-sizes":[15,30,40,50],"page-size":e.listQuery.rows,layout:"prev, pager, next, jumper, sizes, total",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])],1),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.dialogFormVisible,"close-on-click-modal":!1,width:"40%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"专家类型：",prop:"type"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择专家类型",size:"small"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.options1,function(e){return a("el-option",{key:e.code,attrs:{label:e.value,value:e.code}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"专家姓名：",prop:"name"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入专家姓名",size:"small"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所属单位：",prop:"subordinateUnits"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入所属单位",size:"small"},model:{value:e.form.subordinateUnits,callback:function(t){e.$set(e.form,"subordinateUnits",t)},expression:"form.subordinateUnits"}})],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"年龄：",prop:"age"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入年龄",size:"small"},model:{value:e.form.age,callback:function(t){e.$set(e.form,"age",e._n(t))},expression:"form.age"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"性别：",prop:"sex"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择性别",size:"small"},model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},e._l(e.sexOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱：",prop:"email"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入邮箱",size:"small"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号：",prop:"phone"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入手机号",size:"small"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:"添加专家信息"===e.title,expression:"title==='添加专家信息'"}],attrs:{type:"primary",loading:e.loading},on:{click:function(t){return e.submitForm("form")}}},[e._v("确 定")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:"添加专家信息"!==e.title,expression:"title!=='添加专家信息'"}],attrs:{type:"primary",loading:e.loading},on:{click:function(t){return e.editForm("form")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var n=a("C7Lr")(s,l,!1,function(e){a("e5iP")},null,null);t.default=n.exports},e5iP:function(e,t){}});
//# sourceMappingURL=49.47ca0d38e640092e171c.js.map