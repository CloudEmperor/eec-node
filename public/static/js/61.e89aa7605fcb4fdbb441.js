webpackJsonp([61],{"6xWY":function(t,e){},IbXU:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("fn1C"),n=a("oAV5"),s=a("fcG9"),o={components:{QueryFilter:i.a,Crumb:s.a},data:function(){return{form:{busiGroup3:"",ext1:"",ext2:"",ext3:"",page:1,pageSize:15},tableData:[],total:0,bodyLoading:!0,roleName:localStorage.getItem("roleName"),queryAuthority:[],api:{listUnSubmitCourseQuality:"/form/rest/FormMainBaseBusiness/listUnSubmitCourseQuality/v1",discard:"/form/rest/FormMainBaseBusiness/discard/v1",startInvestigation:"/form/rest/FormMainBaseBusiness/startCourseInvestigation/v1"}}},created:function(){"学院管理员"===this.roleName||"教师"===this.roleName?this.queryAuthority=[1,2,4,5]:"专业管理员"===this.roleName?this.queryAuthority=[2,4,5]:"课程负责人"===this.roleName&&(this.queryAuthority=[2,3])},mounted:function(){this.getList()},methods:{querySelect:function(t){this.form.busiGroup3=t.specialtyId,this.form.ext1=t.versionId,this.form.ext2=t.classId,this.form.ext3="课程负责人"===this.roleName?t.gradesId:t.schedulingGradesId,this.form.page=1,this.form.pageSize=15,this.getList()},getList:function(){var t=this;this.$post(this.api.listUnSubmitCourseQuality,this.form).then(function(e){t.bodyLoading=!1,200===e.code&&(t.tableData=e.data.rows,t.total=e.data.total)})},handleEntering:function(t){this.$router.push({path:"/evaluationAndFeedback/questionnaireOperation",query:{id:t.id}})},handleAdd:function(){this.$router.push({path:"/courseQualityEvaluation/NewQuestionnaire",query:{type:"course",status:"add"}})},handleEdit:function(t){this.$router.push({path:"/courseQualityEvaluation/NewQuestionnaire",query:{type:"course",status:"edit",id:t.id}})},handleView:function(t){this.$router.push({path:"/evaluationAndFeedback/questionnairePreview",query:{entryType:"rest",id:t.id}})},handleDelete:function(t){var e=this;this.$confirm("此操作将废弃该问卷, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a={id:t.id};e.$post(e.api.discard,a).then(function(t){200===t.code?(e.$notify.success({title:"success",duration:1500,message:"操作成功"}),e.getList()):e.$notify.error({title:"error",duration:1500,message:t.msg})})})},handleStart:function(t){var e=this;this.$confirm("确认发起"+t.formName+"的达成评价?","确认提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$post(e.api.startInvestigation,{formId:t.id}).then(function(t){200===t.code&&e.$notify.success({title:"success",duration:1500,message:"操作成功"})})})},handleSizeChange:function(t){this.form.pageSize=t,this.getList()},handleCurrentChange:function(t){this.form.page=t,this.getList()}},filters:{time:function(t){return t?Object(n.a)(t,"yyyy-MM-dd"):""}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading.body",value:t.bodyLoading,expression:"bodyLoading",modifiers:{body:!0}}],staticClass:"courseQualityQuestionnaire"},[a("crumb",{staticStyle:{padding:"0 5px"}},[a("div",{directives:[{name:"havaRole",rawName:"v-havaRole",value:"courseQualityQuestionnaireAdd",expression:"'courseQualityQuestionnaireAdd'"}],staticClass:"new--btn",attrs:{slot:"right"},on:{click:t.handleAdd},slot:"right"},[t._v("+ 新建")])]),t._v(" "),a("div",{staticClass:"mainContainer"},[a("query-filter",{attrs:{showData:t.queryAuthority},on:{onSelect:t.querySelect}}),t._v(" "),a("div",{staticClass:"tableBody"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,stripe:""}},[a("el-table-column",{attrs:{label:"问卷名称",width:"200","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.formName)+"\n          ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"调查课程",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.ext3))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"问卷类型",prop:"classifyName"}}),t._v(" "),a("el-table-column",{attrs:{label:"调查年级"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.ext2))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"380"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{directives:[{name:"havaRole",rawName:"v-havaRole",value:"courseQualityQuestionnaireEdit",expression:"'courseQualityQuestionnaireEdit'"}],attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleEdit(e.row)}}},[a("SvgIcon",{attrs:{"icon-class":"iconbianji1"}}),t._v(" 编辑问卷\n            ")],1),t._v(" "),a("el-button",{directives:[{name:"havaRole",rawName:"v-havaRole",value:"courseQualityQuestionnaireDel",expression:"'courseQualityQuestionnaireDel'"}],staticStyle:{color:"#ff5858"},attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleDelete(e.row)}}},[a("SvgIcon",{attrs:{"icon-class":"iconshanchu"}}),t._v(" 废弃\n            ")],1),t._v(" "),a("el-button",{directives:[{name:"havaRole",rawName:"v-havaRole",value:"courseQualityQuestionnaireView",expression:"'courseQualityQuestionnaireView'"}],attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleView(e.row)}}},[a("SvgIcon",{attrs:{"icon-class":"iconyulan"}}),t._v(" 预览\n            ")],1),t._v(" "),"null"!==e.row.id&&1===e.row.status?a("el-button",{directives:[{name:"havaRole",rawName:"v-havaRole",value:"courseQualityQuestionnaireStart",expression:"'courseQualityQuestionnaireStart'"}],attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleStart(e.row)}}},[a("SvgIcon",{attrs:{"icon-class":"iconfaqidiaocha"}}),t._v(" 发起调查\n            ")],1):t._e()]}}])})],1)],1),t._v(" "),a("div",{staticClass:"pagination"},[a("div",{staticClass:"block"},[a("el-pagination",{attrs:{background:"","current-page":t.form.page,"page-sizes":[15,30,40,50],"page-size":t.form.pageSize,layout:"prev, pager, next, jumper, sizes, total",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])],1)],1)},staticRenderFns:[]};var u=a("C7Lr")(o,r,!1,function(t){a("6xWY")},null,null);e.default=u.exports}});
//# sourceMappingURL=61.e89aa7605fcb4fdbb441.js.map