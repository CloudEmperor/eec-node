{"version":3,"sources":["webpack:///src/views/main/dataSource.vue","webpack:///./src/views/main/dataSource.vue?f144","webpack:///./src/views/main/dataSource.vue"],"names":["dataSource","name","data","icon","edition","active","uploadDisabled","uploadUrl","dialogVisible","pageTitle","tableData","id","desc","versionOptions","flag","uploadData","mounted","watch","val","this","methods","headInfo","item","handleClick","$notify","warning","title","message","versionId","download","row","location","href","API_URL","importData","_this","$get","then","res","status","error","duration","catch","err","token","localStorage","getItem","$nextTick","$refs","uploadXls","clearFiles","handleExceed","files","fileList","length","onProgress","handleSuccess","_this2","console","log","success","onError","_this3","main_dataSource","render","_vm","_h","$createElement","_c","_self","staticClass","on","_v","attrs","icon-class","size","_s","staticStyle","width","border","stripe","prop","align","label","scopedSlots","_u","key","fn","scope","font-size","type","nativeOn","click","$event","preventDefault","visible","close-on-click-modal","update:visible","height","min-width","float","direction","description","position","top","left","line-height","color","placeholder","model","value","callback","$$v","expression","_l","_e","padding","ref","disabled","action","on-success","on-progress","on-error","limit","show-file-list","accept","on-exceed","slot","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/93.3ba8b662c9e1c3ebaf1f.js","sourcesContent":["<template>\r\n  <div class=\"center studentLearningStatus\">\r\n    <div class=\"center_breadcrumb\">\r\n      <Crumb @headInfo=\"headInfo\"/>\r\n    </div>\r\n    <div class=\"center_content\">\r\n      <div class=\"center_content_title\">\r\n        <SvgIcon icon-class=\"icondatixitongguanli\" size=\"20px\"></SvgIcon>\r\n        <span>{{pageTitle}}</span>\r\n      </div>\r\n      <div class=\"table-container\">\r\n        <el-table :data=\"tableData\" border style=\"width: 100%\" stripe>\r\n          <el-table-column prop=\"name\" align=\"center\" label=\"数据名称\"></el-table-column>\r\n          <el-table-column prop=\"desc\" align=\"center\" label=\"数据描述\"></el-table-column>\r\n          <el-table-column label=\"数据模板\" width=\"240\" align=\"center\">\r\n            <template slot-scope=\"scope\">\r\n              <div class=\"operate-button distance\">\r\n                <i class=\"el-icon-download\" style=\"font-size:16px;\"></i>\r\n                <el-button\r\n                 type=\"text\"\r\n                 @click.native.prevent=\"download(scope.row)\"\r\n                 size=\"small\">\r\n                 下载模板\r\n                 </el-button>\r\n              </div>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"导入数据\" width=\"240\" align=\"center\">\r\n            <template slot-scope=\"scope\">\r\n              <div class=\"operate-button distance\">\r\n                <i class=\"el-icon-document\" style=\"font-size:16px;\"></i>\r\n                <el-button\r\n                 @click.native.prevent=\"importData(scope.row)\"\r\n                 type=\"text\"\r\n                 size=\"small\">\r\n                 导入数据\r\n                 </el-button>\r\n              </div>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </div>\r\n    </div>\r\n    <!-- 弹框 -->\r\n    <el-dialog title=\"导入数据\" :visible.sync=\"dialogVisible\" class=\"set-el-dialog set-course-dialog\" width=\"35%\" :close-on-click-modal=\"false\">\r\n      <div style=\"height:400px\">\r\n        <div style=\"height: 400px; min-width: 280px; width:50%; float: left\">\r\n          <el-steps direction=\"vertical\" :active=\"active\">\r\n            <el-step title=\"上传文件\" icon=\"el-icon-upload\"></el-step>\r\n            <el-step title=\"检查数据\" :icon=\"icon\" description=\"等待文件上传完毕后自动检查表格数据。\"></el-step>\r\n            <el-step title=\"完成\" icon=\"el-icon-success\"></el-step>\r\n          </el-steps>\r\n        </div>\r\n        <div style=\"position: absolute;top: 105px;left: 85px;\">\r\n          <div v-if=\"flag===4\" style=\"height: 50px; line-height: 50px\">\r\n            <label><span style=\"color: red\">*</span>培养方案版本:&nbsp;&nbsp;</label>\r\n            <el-select v-model=\"edition\" placeholder=\"请选择培养方案版本\" size=\"mini\">\r\n              <el-option\r\n              v-for=\"item in versionOptions\"\r\n              :key=\"item.id\"\r\n              :label=\"item.name\"\r\n              :value=\"item.id\">\r\n              </el-option>\r\n            </el-select>\r\n          </div>\r\n          <!-- <div v-if=\"flag===5\" style=\"height: 50px; line-height: 50px\">\r\n            <label><span style=\"color: red\">*</span>课表学期:&nbsp;&nbsp;</label>\r\n            <el-select v-model=\"edition\" placeholder=\"请选择课表学期\" size=\"mini\">\r\n              <el-option\r\n                v-for=\"item in options1\"\r\n                :key=\"item.value\"\r\n                :label=\"item.label\"\r\n                :value=\"item.value\">\r\n              </el-option>\r\n            </el-select>\r\n          </div> -->\r\n          <p style=\"padding: 10px 0;font-size:12px\">导入数据前，请先下载模板，按照模板格式录入数据。</p>\r\n               <!-- :before-upload=\"beforeUpload\" -->\r\n          <div class=\"file-upload\">\r\n              <el-upload\r\n               ref=\"uploadXls\"\r\n               :disabled=\"uploadDisabled\"\r\n               class=\"upload-demo\"\r\n               :action=\"uploadUrl\"\r\n               :on-success=\"handleSuccess\"\r\n               :on-progress=\"onProgress\"\r\n               :on-error=\"onError\"\r\n               :limit=\"1\"\r\n               :show-file-list=\"false\"\r\n               accept=\".xls,.xlsx\"\r\n               name=\"file\"\r\n               :data=\"uploadData\"\r\n               :on-exceed=\"handleExceed\">\r\n              <el-button size=\"small\" type=\"primary\" @click=\"handleClick\"><i class=\"el-icon-upload el-icon--right\"></i>  上传文件</el-button>\r\n              <div slot=\"tip\" class=\"el-upload__tip\">支持文件格式：.xls .xlsx。</div>\r\n            </el-upload>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <!-- <div slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button  @click=\"dialogVisible=false\">取 消</el-button>\r\n          <el-button type=\"primary\" @click=\"handleSubmit('form')\">确 定</el-button>\r\n      </div> -->\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"DataSource\",\r\n  data() {\r\n    return {\r\n      icon: 'el-icon-refresh',\r\n      edition: '',\r\n      active: 1,\r\n      uploadDisabled: false,\r\n      uploadUrl: '',\r\n      dialogVisible: false,\r\n      pageTitle: \"数据源管理\",\r\n      tableData: [\r\n        {\r\n          id: 1,\r\n          name: '班级信息',\r\n          desc: '维护班级管理信息'\r\n        },\r\n        {\r\n          id: 2,\r\n          name: '教师信息',\r\n          desc: '维护教师管理信息'\r\n        },\r\n        {\r\n          id: 3,\r\n          name: '学生信息',\r\n          desc: '维护学生管理信息'\r\n        },\r\n        {\r\n          id: 4,\r\n          name: '课程信息',\r\n          desc: '维护课程信息，课程信息必须关联课程大纲版本'\r\n        },\r\n        {\r\n          id: 5,\r\n          name: '排课信息',\r\n          desc: '维护每学期课程安排，排课信息必须关联学年及学期'\r\n        }\r\n      ],\r\n      versionOptions: [],\r\n      flag: 0,\r\n      uploadData: {}\r\n    };\r\n  },\r\n  mounted() {\r\n    \r\n  },\r\n  watch: {\r\n    active(val) {\r\n      if(val === 2) {\r\n        this.icon = \"el-icon-loading\"\r\n      } else {\r\n        this.icon = \"el-icon-refresh\"\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    headInfo(item) {\r\n      this.pageTitle = item[1];\r\n    },\r\n    handleClick() {\r\n      if (this.flag === 4 && !this.edition) {\r\n        this.uploadDisabled = true\r\n        this.$notify.warning({\r\n          title: '提示',\r\n          message: '请选择培养方案版本!'\r\n        })\r\n        return false\r\n      } else {\r\n        if (this.flag === 4) {\r\n          this.uploadData = {\r\n            // 培养方案版本参数\r\n            versionId: this.edition\r\n          }\r\n        } else {\r\n          this.uploadData = {}\r\n        }\r\n        this.uploadDisabled = false\r\n      }\r\n    },\r\n    download(row) {\r\n      switch (row.id) {\r\n        case 1:\r\n          // location.href = '@/../static/file/class.xlsx'\r\n          location.href = this.API_URL + '/basic/import/template/classInformation'\r\n          break\r\n        case 2:\r\n          // location.href = '@/../static/file/teacher.xlsx'\r\n          location.href = this.API_URL + '/basic/import/template/teacher'\r\n          break\r\n        case 3:\r\n          // location.href = '@/../static/file/student.xlsx'\r\n          location.href = this.API_URL + '/basic/import/template/student'\r\n          break\r\n        case 4:\r\n          // location.href = '@/../static/file/course.xlsx'\r\n          location.href = this.API_URL + '/basic/import/template/courseInformation'\r\n          break\r\n        case 5:\r\n          location.href = this.API_URL + '/basic/import/template/courseScheduling'\r\n          break\r\n      }\r\n    },\r\n    importData(row) {\r\n      this.flag = row.id\r\n      this.active = 1\r\n      this.dialogVisible = true\r\n      this.edition = ''\r\n      if(row.id === 4) {\r\n        this.$get('basic/version/all').then(res => {\r\n          if(res.status === 1){\r\n            this.versionOptions=res.data;\r\n          }else{\r\n            this.$notify.error({\r\n              title: 'error',\r\n              duration:1500,\r\n              message: '获取培养方案版本失败！请刷新重试'\r\n            })\r\n          }\r\n        }).catch(err =>{\r\n          this.$notify.error({\r\n              title: 'error',\r\n              duration:1500,\r\n              message: '获取培养方案版本失败！请刷新重试'\r\n            })\r\n        })\r\n      }\r\n      let token = localStorage.getItem('x_token')\r\n      switch (row.id) {\r\n        case 1:\r\n          this.uploadUrl = this.API_URL + '/basic/import/classInformation' + `?x-token=${token}`\r\n          break\r\n        case 2:\r\n          this.uploadUrl = this.API_URL + '/basic/import/teacher' + `?x-token=${token}`\r\n          break\r\n        case 3:\r\n          this.uploadUrl = this.API_URL + '/basic/import/student' + `?x-token=${token}`\r\n          break\r\n        case 4:\r\n          this.uploadUrl = this.API_URL + '/basic/import/courseInformation' + `?x-token=${token}`\r\n          break\r\n        case 5:\r\n          this.uploadUrl = this.API_URL + '/basic/import/courseScheduling' + `?x-token=${token}`\r\n          break\r\n      }\r\n      this.$nextTick(() => {\r\n        this.$refs.uploadXls.clearFiles()\r\n      })\r\n    },\r\n    handleExceed(files, fileList) {\r\n      this.$notify.warning({\r\n        title: '提示',\r\n        message: `当前限制选择 1 个文件，本次选择了 ${files.length} 个文件，共选择了 ${files.length + fileList.length} 个文件`\r\n      })\r\n    },\r\n    // beforeUpload(file) {\r\n    //   // var testmsg=file.name.substring(file.name.lastIndexOf('.')+1)\r\n    //   // const extension = testmsg === 'xls'\r\n    //   // const extension2 = testmsg === 'xlsx'\r\n    //   const isLt20M = file.size / 1024 / 1024 < 20     //这里做文件大小限制\r\n    //   // if(!extension && !extension2) {\r\n    //   //   this.$message({\r\n    //   //     message: '上传文件只能是 xls、xlsx格式!',\r\n    //   //     type: 'warning'\r\n    //   //   });\r\n    //   // }\r\n    //   if(!isLt20M) {\r\n    //     this.$message({\r\n    //       message: '上传文件大小不能超过 20MB!',\r\n    //       type: 'warning'\r\n    //     });\r\n    //   }\r\n    //   // return extension || extension2 && isLt20M\r\n    //   return isLt20M\r\n    // },  \r\n    onProgress() {\r\n      this.active = 2\r\n      this.uploadDisabled = true\r\n    },\r\n    handleSuccess(res){\r\n      console.log(res)\r\n      if(res.status===1) {\r\n        this.$notify.success({\r\n          title: '提示',\r\n          message: '导入成功!'\r\n        })\r\n        this.active = 3\r\n        this.uploadDisabled = false\r\n      } else {\r\n        if(res.data) {\r\n          this.$notify.error({\r\n            title: '提示',\r\n            message: '导入失败!' + res.data[0].message\r\n          })\r\n        } else {\r\n          this.$notify.error({\r\n            title: '提示',\r\n            message: res.message\r\n          })\r\n        }\r\n        this.active = 1\r\n        this.uploadDisabled = false\r\n      }\r\n      this.$nextTick(() => {\r\n        this.$refs.uploadXls.clearFiles()\r\n      })\r\n    },\r\n    onError() {\r\n      this.$notify.error({\r\n        title: '提示',\r\n        message: '上传失败!请尝试重新上传!'\r\n      })\r\n      this.active = 1\r\n      this.uploadDisabled = false\r\n      this.$nextTick(() => {\r\n        this.$refs.uploadXls.clearFiles()\r\n      })\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang='scss'>\r\n@import \"../../styles/center.scss\";\r\n.studentLearningStatus {\r\n  .center_content {\r\n    .center_content_title {\r\n      position: relative;\r\n      .derive-btn {\r\n        position: absolute;\r\n        right: 0;\r\n        top: 6px;\r\n        .el-button {\r\n          // padding: 7px 23px 3px 23px;\r\n          float: left;\r\n          i,\r\n          span {\r\n            font-size: 12px;\r\n            color: #fff;\r\n          }\r\n          i {\r\n            margin-top: 0;\r\n          }\r\n          span {\r\n            font-weight: normal;\r\n            margin-left: 0;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/main/dataSource.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"center studentLearningStatus\"},[_c('div',{staticClass:\"center_breadcrumb\"},[_c('Crumb',{on:{\"headInfo\":_vm.headInfo}})],1),_vm._v(\" \"),_c('div',{staticClass:\"center_content\"},[_c('div',{staticClass:\"center_content_title\"},[_c('SvgIcon',{attrs:{\"icon-class\":\"icondatixitongguanli\",\"size\":\"20px\"}}),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.pageTitle))])],1),_vm._v(\" \"),_c('div',{staticClass:\"table-container\"},[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData,\"border\":\"\",\"stripe\":\"\"}},[_c('el-table-column',{attrs:{\"prop\":\"name\",\"align\":\"center\",\"label\":\"数据名称\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"desc\",\"align\":\"center\",\"label\":\"数据描述\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"数据模板\",\"width\":\"240\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{staticClass:\"operate-button distance\"},[_c('i',{staticClass:\"el-icon-download\",staticStyle:{\"font-size\":\"16px\"}}),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},nativeOn:{\"click\":function($event){$event.preventDefault();return _vm.download(scope.row)}}},[_vm._v(\"\\n               下载模板\\n               \")])],1)]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"导入数据\",\"width\":\"240\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{staticClass:\"operate-button distance\"},[_c('i',{staticClass:\"el-icon-document\",staticStyle:{\"font-size\":\"16px\"}}),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},nativeOn:{\"click\":function($event){$event.preventDefault();return _vm.importData(scope.row)}}},[_vm._v(\"\\n               导入数据\\n               \")])],1)]}}])})],1)],1)]),_vm._v(\" \"),_c('el-dialog',{staticClass:\"set-el-dialog set-course-dialog\",attrs:{\"title\":\"导入数据\",\"visible\":_vm.dialogVisible,\"width\":\"35%\",\"close-on-click-modal\":false},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('div',{staticStyle:{\"height\":\"400px\"}},[_c('div',{staticStyle:{\"height\":\"400px\",\"min-width\":\"280px\",\"width\":\"50%\",\"float\":\"left\"}},[_c('el-steps',{attrs:{\"direction\":\"vertical\",\"active\":_vm.active}},[_c('el-step',{attrs:{\"title\":\"上传文件\",\"icon\":\"el-icon-upload\"}}),_vm._v(\" \"),_c('el-step',{attrs:{\"title\":\"检查数据\",\"icon\":_vm.icon,\"description\":\"等待文件上传完毕后自动检查表格数据。\"}}),_vm._v(\" \"),_c('el-step',{attrs:{\"title\":\"完成\",\"icon\":\"el-icon-success\"}})],1)],1),_vm._v(\" \"),_c('div',{staticStyle:{\"position\":\"absolute\",\"top\":\"105px\",\"left\":\"85px\"}},[(_vm.flag===4)?_c('div',{staticStyle:{\"height\":\"50px\",\"line-height\":\"50px\"}},[_c('label',[_c('span',{staticStyle:{\"color\":\"red\"}},[_vm._v(\"*\")]),_vm._v(\"培养方案版本:  \")]),_vm._v(\" \"),_c('el-select',{attrs:{\"placeholder\":\"请选择培养方案版本\",\"size\":\"mini\"},model:{value:(_vm.edition),callback:function ($$v) {_vm.edition=$$v},expression:\"edition\"}},_vm._l((_vm.versionOptions),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.name,\"value\":item.id}})}),1)],1):_vm._e(),_vm._v(\" \"),_c('p',{staticStyle:{\"padding\":\"10px 0\",\"font-size\":\"12px\"}},[_vm._v(\"导入数据前，请先下载模板，按照模板格式录入数据。\")]),_vm._v(\" \"),_c('div',{staticClass:\"file-upload\"},[_c('el-upload',{ref:\"uploadXls\",staticClass:\"upload-demo\",attrs:{\"disabled\":_vm.uploadDisabled,\"action\":_vm.uploadUrl,\"on-success\":_vm.handleSuccess,\"on-progress\":_vm.onProgress,\"on-error\":_vm.onError,\"limit\":1,\"show-file-list\":false,\"accept\":\".xls,.xlsx\",\"name\":\"file\",\"data\":_vm.uploadData,\"on-exceed\":_vm.handleExceed}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":_vm.handleClick}},[_c('i',{staticClass:\"el-icon-upload el-icon--right\"}),_vm._v(\"  上传文件\")]),_vm._v(\" \"),_c('div',{staticClass:\"el-upload__tip\",attrs:{\"slot\":\"tip\"},slot:\"tip\"},[_vm._v(\"支持文件格式：.xls .xlsx。\")])],1)],1)])])])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-38f7850c\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/views/main/dataSource.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-38f7850c\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./dataSource.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./dataSource.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./dataSource.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-38f7850c\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./dataSource.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/main/dataSource.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}