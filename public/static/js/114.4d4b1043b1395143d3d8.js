webpackJsonp([114],{"/oVY":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r("brjS"),a=r("Z+s7"),o={name:"BasicInfo",components:{TitleCurmb:s.a,CourseSteps:a.a},data:function(){var e=this;return{courseOptions:[],selectCourse:[],form:{courseCode:"",period:"",specialName:"",courseName:"",credit:"",courseIds:"",enName:"",className:"",remarks:""},rules:{courseCode:[{required:!0,message:"请输入课程代码",trigger:"blur"}],period:[{required:!0,message:"请设置学时",trigger:"blur"}],specialName:[{required:!0,message:"请选择试用专业",trigger:"blur"}],courseName:[{required:!0,message:"请输入课程名称",trigger:"blur"}],credit:[{required:!0,message:"请设置学分",trigger:"blur"}],courseIds:[{required:!0,validator:function(t,r,s){0!==e.selectCourse.length?s():s(new Error("请选择先修课程"))},trigger:"blur"}],className:[{required:!0,message:"请选择课程性质",trigger:"blur"}],remarks:[{required:!0,message:"请输入课程描述",trigger:"blur"}]},api:{course:function(e){return"/basic/course/refInfo/"+e},selectBySpecialty:function(e){return"/basic/course/selectBySpecialty/"+e},save:function(){return"/basic/course/basicedit"}}}},created:function(){this.selectBySpecialty()},mounted:function(){this.initData()},methods:{initData:function(){var e=this,t=this.api.course(this.$route.query.id);this.$get(t).then(function(t){if(1===t.status){var r={courseCode:t.data.courseCode,period:t.data.period,specialName:t.data.specialName,courseName:t.data.courseName,credit:t.data.credit,courseIds:t.data.frontCourseId,enName:t.data.enName||"",className:t.data.className,remarks:t.data.remarks||""};e.selectCourse=t.data.frontCourseId?t.data.frontCourseId.split(","):[],e.courseIds=t.data.frontCourseId||"",e.form=r}else e.$notify.error({title:"error",duration:1500,message:t.message})})},selectBySpecialty:function(){var e=this,t=this.api.selectBySpecialty(localStorage.getItem("specialId"));this.$get(t).then(function(t){1===t.status&&(e.courseOptions=t.data)})},selectChange:function(){this.courseIds=this.selectCourse.join(",")},formSubmit:function(e,t){var r=this,s={id:this.$route.query.id,frontCourseIds:this.courseIds,remarks:this.form.remarks};"save"===t?(this.$refs[e].resetFields(),this.userSave("save",s)):this.$refs[e].validate(function(e){e&&r.userSave("next",s)})},userSave:function(e,t){var r=this;this.$put(this.api.save(),t).then(function(s){1===s.status?(r.$notify.success({title:"success",duration:1500,message:s.message}),"next"===e?r.$router.push({path:"/Construction/teachingGoal",query:{id:t.id,title:r.form.courseName}}):r.initData()):r.$notify.error({title:"error",duration:1500,message:s.message})})}}},i={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"course-construction"},[r("title-curmb"),e._v(" "),r("course-steps",{attrs:{title:e.form.courseName,step:1}}),e._v(" "),r("div",{staticClass:"course-construction_body"},[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[r("h2",[e._v("基本信息")]),e._v(" "),r("el-row",{attrs:{gutter:24}},[r("el-col",{attrs:{span:11}},[r("el-form-item",{attrs:{label:"课程代码",prop:"courseCode"}},[r("el-input",{staticClass:"my-input",attrs:{disabled:"",placeholder:""},model:{value:e.form.courseCode,callback:function(t){e.$set(e.form,"courseCode",t)},expression:"form.courseCode"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"学时",prop:"period"}},[r("el-input-number",{staticClass:"my-input",attrs:{min:0,disabled:"",placeholder:"","controls-position":"right"},model:{value:e.form.period,callback:function(t){e.$set(e.form,"period",t)},expression:"form.period"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"试用专业",prop:"specialName"}},[r("el-input",{staticClass:"my-input",attrs:{disabled:"",placeholder:""},model:{value:e.form.specialName,callback:function(t){e.$set(e.form,"specialName",t)},expression:"form.specialName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"课程类型",prop:"className"}},[r("el-input",{staticClass:"my-input",attrs:{disabled:"",placeholder:""},model:{value:e.form.className,callback:function(t){e.$set(e.form,"className",t)},expression:"form.className"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:11,offset:1}},[r("el-form-item",{attrs:{label:"课程名称",prop:"courseName"}},[r("el-input",{staticClass:"my-input",attrs:{disabled:"",placeholder:""},model:{value:e.form.courseName,callback:function(t){e.$set(e.form,"courseName",t)},expression:"form.courseName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"英文名称",prop:"enName"}},[r("el-input",{staticClass:"my-input",attrs:{disabled:"",placeholder:""},model:{value:e.form.enName,callback:function(t){e.$set(e.form,"enName",t)},expression:"form.enName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"学分",prop:"credit"}},[r("el-input-number",{staticClass:"my-input",attrs:{min:0,disabled:"",placeholder:"","controls-position":"right"},model:{value:e.form.credit,callback:function(t){e.$set(e.form,"credit",t)},expression:"form.credit"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"先修课程",prop:"courseIds"}},[r("el-select",{staticClass:"my-input",attrs:{filterable:"",multiple:"",placeholder:"请选择"},on:{change:e.selectChange},model:{value:e.selectCourse,callback:function(t){e.selectCourse=t},expression:"selectCourse"}},e._l(e.courseOptions,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1)],1),e._v(" "),r("h2",[e._v("课程性质")]),e._v(" "),r("el-row",[r("el-form-item",{attrs:{label:"课程描述",prop:"remarks"}},[r("el-input",{attrs:{type:"textarea",rows:9,placeholder:"请对课程进行简单的描述..."},model:{value:e.form.remarks,callback:function(t){e.$set(e.form,"remarks",t)},expression:"form.remarks"}})],1)],1),e._v(" "),r("el-row",{attrs:{gutter:24}},[r("el-col",{attrs:{span:6,offset:9}},[r("div",{staticClass:"c-footer"},[r("el-button",{on:{click:function(t){return e.formSubmit("form","save")}}},[e._v("保  存")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.formSubmit("form","next")}}},[e._v("下一步")])],1)])],1)],1)],1)],1)},staticRenderFns:[]};var l=r("C7Lr")(o,i,!1,function(e){r("Lj8m")},"data-v-138c0c0a",null);t.default=l.exports},Lj8m:function(e,t){}});
//# sourceMappingURL=114.4d4b1043b1395143d3d8.js.map