webpackJsonp([98],{"2LHy":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("g416"),s={name:"Disintegrate",components:{},data:function(){return{pageName:"毕业要求",pageTitleArr:[],id:this.$route.query.id,title:this.$route.query.title,code:this.$route.query.code,data:{},tableData:[],activeIndex:0,isAdd:!0,userDialogFormVisible:!1,courseSupportVisible:!1,courseData:{},page:{graduationClaimId:this.$route.query.id,page:1,rows:15},form:{graduationClaimId:"",code:"",name:"",content:"",id:void 0},rules:{graduationClaimId:[{required:!0,message:"请输入毕业要求",trigger:"blur"}],code:[{validator:function(t,e,i){""==e||void 0==e?i():/^[1-9]*[1-9][0-9]*$/.test(e)?i():i(new Error("请输入整数型指标点编号"))},trigger:"blur",required:!0}],name:[{required:!0,message:"请输入指标点简称",trigger:"blur"}]}}},mounted:function(){this.initData()},computed:{dialogTitle:function(){return this.isAdd?"添加毕业要求":"编辑毕业要求"}},methods:{initData:function(){var t=this,e=a.a.pointList;this.page.versionId=localStorage.getItem("versionId"),this.$post(e,this.page).then(function(e){1===e.status?(t.data=e,t.tableData=e.data):t.$notify.error({title:"error",duration:1500,message:e.message})}).catch(function(t){console.log(t)})},handleSizeChange:function(t){this.page.rows=t,this.initData()},handleCurrentChange:function(t){this.page.page=t,this.initData()},search:function(t,e){this.activeIndex=e,this.page.page=1,this.page.versionId=t.id,this.initData()},openAdd:function(){var t=this;this.userDialogFormVisible=!0,this.form={graduationClaimId:this.id,code:"",name:"",content:"",id:void 0,versionId:localStorage.getItem("versionId")},this.isAdd=!0,this.$nextTick(function(){t.$refs.form.resetFields()})},deleteRow:function(t){var e=this;this.$confirm("确定删除该指标点?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.userDel(t.id)}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},editRow:function(t){var e={graduationClaimId:this.id,code:t.code.split("-")[1],name:t.name,content:t.content,id:t.id,versionId:localStorage.getItem("versionId")};this.form=e,this.userDialogFormVisible=!0,this.isAdd=!1},disintegrateRow:function(t){this.$router.push({path:"/trainingProgram/disintegrate",query:{title:t.goalVal,id:t.id}})},create:function(t){var e=this;this.$refs[t].validate(function(t){t&&(e.isAdd?e.userAdd():e.userEdit())})},cancel:function(t){this.userDialogFormVisible=!1,this.$refs[t].resetFields()},handleDialogClose:function(){this.$refs.form.resetFields(),this.userDialogFormVisible=!1},userAdd:function(){var t=this,e=a.a.pointAdd;this.$post(e,this.form).then(function(e){1===e.status?(t.$notify.success({title:"success",duration:1500,message:e.message}),t.userDialogFormVisible=!1,t.initData()):t.$notify.error({title:"error",duration:1500,message:e.message})}).catch(function(t){console.log(t)})},pointSupportAdd:function(t){var e=this,i=a.a.pointSupportAdd;this.$post(i,t).then(function(t){1===t.status?(e.$notify.success({title:"success",duration:1500,message:t.message}),e.initData()):e.$notify.error({title:"error",duration:1500,message:t.message})}).catch(function(t){console.log(t)})},userDel:function(t){var e=this,i=a.a.pointDel({id:t});this.$deletes(i).then(function(t){1===t.status?(e.$notify.success({title:"success",duration:1500,message:t.message}),e.initData()):e.$notify.error({title:"error",duration:1500,message:t.message})}).catch(function(t){console.log(t)})},userEdit:function(){var t=this,e=a.a.pointEdit;this.$put(e,this.form).then(function(e){1===e.status?(t.$notify.success({title:"success",duration:1500,message:e.message}),t.userDialogFormVisible=!1,t.initData()):t.$notify.error({title:"error",duration:1500,message:e.message})}).catch(function(t){console.log(t)})}}},o={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"center"},[i("div",{staticClass:"center_breadcrumb"},[i("crumb",{staticStyle:{padding:"0 5px"}},[i("div",{staticClass:"new--btn",attrs:{slot:"right"},on:{click:t.openAdd},slot:"right"},[t._v("+ 新建")])])],1),t._v(" "),i("div",{staticClass:"center_content"},[i("div",{staticClass:"table-container"},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,stripe:""}},[i("el-table-column",{attrs:{prop:"code",label:"编号",align:"center",width:"100"}}),t._v(" "),i("el-table-column",{attrs:{prop:"content",label:"指标点内容"}}),t._v(" "),i("el-table-column",{attrs:{prop:"courseVal",label:"支撑课程"}}),t._v(" "),i("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticClass:"operate-button distance"},[i("SvgIcon",{attrs:{"icon-class":"iconbianji1"}}),t._v(" "),i("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(i){return i.preventDefault(),t.editRow(e.row)}}},[t._v("编辑")])],1),t._v(" "),i("div",{staticClass:"operate-button distance"},[i("SvgIcon",{attrs:{"icon-class":"iconshanchu"}}),t._v(" "),i("el-button",{staticStyle:{color:"#ff5858"},attrs:{type:"text",size:"small"},nativeOn:{click:function(i){return i.preventDefault(),t.deleteRow(e.row)}}},[t._v("删除")])],1)]}}])})],1)],1),t._v(" "),t.data.total>15?i("div",{staticClass:"center_pagination"},[i("el-pagination",{attrs:{background:"","current-page":t.page.page,"page-sizes":[15,30,40,50],"page-size":t.page.rows,layout:"total, sizes, prev, pager, next, jumper",total:t.data.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1):t._e()]),t._v(" "),i("el-dialog",{staticClass:"set-el-dialog",attrs:{title:t.dialogTitle,visible:t.userDialogFormVisible,"before-close":t.handleDialogClose,"close-on-click-modal":!1},on:{"update:visible":function(e){t.userDialogFormVisible=e}}},[i("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"120px"}},[i("el-form-item",{attrs:{label:"毕业要求",prop:"graduationClaimId"}},[i("el-input",{attrs:{disabled:"",placeholder:""},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"指标点编号",prop:"code"}},[i("el-input",{attrs:{placeholder:""},model:{value:t.form.code,callback:function(e){t.$set(t.form,"code",e)},expression:"form.code"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"指标点内容",prop:"content"}},[i("el-input",{attrs:{type:"textarea",rows:4,placeholder:""},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){return t.cancel("form")}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.create("form")}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var n=i("C7Lr")(s,o,!1,function(t){i("ZsU7")},null,null);e.default=n.exports},ZsU7:function(t,e){}});
//# sourceMappingURL=98.66a531c404ededaddb18.js.map