webpackJsonp([76],{QzwZ:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("3cXf"),l=a.n(s),i=(a("7Adc"),{data:function(){return{dialogFormVisible:!1,formLabelWidth:"120px",departmentOptions:[],cascaderData:[],province:"",city:"",area:"",falg:!1,falg1:!1,props:{value:"code",label:"name",children:"cities"},selectedOptions:[],form:{name:"",code:"",gender:0,email:"",phone:"",grade:0,classId:"",specialtyId:"",academyId:"",versionId:"",ethnicity:0,idNumber:"",birthday:"",province:"",city:"",area:"",zaixiao:"",xueyuan:"",zhuanye:""},pageNum:1,total:0,page:1,pageSize:15,formInline:{code:"",region:""},rules:{name:[{required:!0,message:"请输入学生姓名",trigger:"blur"}],code:[{required:!0,message:"请输入学生学号",trigger:"blur"}],grade:[{required:!0,message:"请输入入学年份",trigger:"blur"}],zhuanye:[{required:!0,message:"请选择专业",trigger:"blur"}],phone:[{validator:function(e,t,a){""==t||void 0==t?a():/[0-9]{11}/.test(t)?a():a(new Error("请输入正确的手机号格式"))},trigger:"blur"}],email:[{type:"email",message:"邮箱格式不对",trigger:"blur"}],birthday:[{validator:function(e,t,a){""==t||void 0==t?a():/^(\d{1,4})(-|\-)(\d{1,2})\2(\d{1,2})$/.test(t)?a():a(new Error("请按照提示输入正确格式"))},trigger:"blur"}],idNumber:[{validator:function(e,t,a){if(""==t||void 0==t)a();else{var s=/^[1-9]\d{5}(18|19|([23]\d))\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/;console.log(s.test(t),"reg.test(value)"),s.test(t)?a():a(new Error("请输入正确的身份证格式"))}},trigger:"blur"}]},options:[],value:"",options0:[],value0:"",options1:[],value1:"",optionsarr1:[],valuearr1:"",options2:[],value2:"",options3:[],value3:"",optionsarr2:[],valuearr2:"",optionsarr3:[],valuearr3:"",options4:[{code:0,value:"男"},{code:1,value:"女"}],value4:0,options5:[],value5:"",optionsarr5:[],valuearr5:"",options6:[],value6:"",options7:[],value7:"",tableData:[],loading:!0,code:0,addst:""}},methods:{getNodes:function(e){var t=this;this.$get("/system/dist/list/37").then(function(e){t.cascaderData=e.data;for(var a=0;a<t.cascaderData.length;a++)t.cascaderData[a].cities=[]})},handleItemChange:function(e){var t=this;1===e.length?this.$get("/system/dist/list/"+e[0]).then(function(a){for(var s=0;s<a.data.length;s++)a.data[s].cities=[];for(s=0;s<t.cascaderData.length;s++)if(e[0]==t.cascaderData[s].code){t.cascaderData[s].cities=a.data,t.province=t.cascaderData[s].code,t.cascaderData=JSON.parse(l()(t.cascaderData));break}}):2===e.length&&this.$get("/system/dist/list/"+e[1]).then(function(a){for(var s=0;s<t.cascaderData.length;s++)if(e[0]==t.cascaderData[s].code)for(var i=0;i<t.cascaderData[s].cities.length;i++)if(e[1]===t.cascaderData[s].cities[i].code){t.cascaderData[s].cities[i].cities=a.data,t.city=t.cascaderData[s].cities[i].code,t.cascaderData=JSON.parse(l()(t.cascaderData)),t.area=t.cascaderData[s].cities[i].cities[s].code;break}})},onSubmit:function(){var e=this;"全部"==this.value2&&(this.value2=null);var t={academyId:this.value0,specialtyId:this.valuearr1,grade:this.valuearr2,classId:this.valuearr3,atSchoolStatus:this.valuearr5,keywords:this.formInline.code,rows:this.pageSize,page:this.pageNum};this.$post("/basic/student/list",t).then(function(t){1==t.status&&(e.tableData=t.data,e.total=t.total,e.loading=!1)})},versionall:function(){var e=this;this.$get("/basic/version/all").then(function(t){e.options6=t.data})},allxue:function(){var e=this;this.$get("/basic/academy/all?type=1").then(function(t){1==t.status&&(e.options0=t.data,e.options0.unshift({code:"",name:"全部"}))})},classgrades:function(){var e=this;this.$get("/basic/class/grades").then(function(t){1==t.status&&(e.options2=JSON.parse(l()(t.data)),e.optionsarr2=t.data,e.optionsarr2.unshift({grade:"全部"}))})},studentlist:function(){var e=this,t={rows:this.pageSize,page:this.pageNum};this.$post("/basic/student/list",t).then(function(t){1==t.status&&(e.tableData=t.data,e.total=t.total,e.loading=!1)})},allxue1:function(){var e=this;this.$get("/basic/academy/all?type=1").then(function(t){1==t.status&&(e.options=JSON.parse(l()(t.data)))})},changes1:function(e){var t=this,a=e||"";this.$get("/basic/specialty/all/"+a).then(function(e){1==e.status&&(t.optionsarr1=e.data,t.optionsarr1.unshift({code:"",name:"全部"}))})},changes2:function(e){var t=this,a=e||"";this.$get("/basic/specialty/all/"+a).then(function(e){1==e.status&&(t.options1=JSON.parse(l()(e.data)))})},changes3:function(){var e=this,t=this.valuearr1;this.$get("/basic/class/all/"+t).then(function(t){1==t.status&&(e.optionsarr3=t.data)})},changes33:function(){var e=this,t=this.value1;this.$get("/basic/class/all/"+t).then(function(t){1==t.status&&(e.options3=t.data)})},atSchoolStatus:function(){var e=this;this.$get("/system/dict/field/atSchoolStatus").then(function(t){1==t.status&&(e.options5=JSON.parse(l()(t.data)),e.optionsarr5=t.data,e.optionsarr5.unshift({code:null,value:"全部"}))})},ethnicity:function(){var e=this;this.$get("/system/dict/field/ethnicity").then(function(t){1==t.status&&(e.options7=t.data)})},addstudent:function(){var e=this,t={birthday:this.form.birthday,code:this.form.code,email:this.form.email,grade:Number(this.form.grade),idNumber:this.form.idNumber,name:this.form.name,phone:this.form.phone,academyId:this.value,specialtyId:this.value1,classId:this.value3,gender:this.value4,ethnicity:this.value7,atSchoolStatus:this.value5,city:this.city,province:this.province,area:this.area};this.$post("/basic/student/add",t).then(function(t){1==t.status&&(e.$notify({message:"新增成功",type:"success"}),e.tableData.unshift(t.data),e.studentlist(),e.allxue1())})},handleEdit:function(e,t){var a=this;this.addst="编辑学生",this.falg=!1,this.falg1=!0,this.dialogFormVisible=!0,this.$get("/basic/academy/all?type=1").then(function(e){1==e.status&&(a.options=e.data)}),this.$get("/basic/specialty/all/"+t.academyId).then(function(e){1==e.status&&(a.options1=e.data)}),this.$get("/basic/class/all/"+t.specialtyId).then(function(e){1==e.status&&(a.options3=e.data)}),this.value=t.academyId,this.value1=t.specialtyId,this.value2=t.grade,this.value3=t.classId,this.value4=t.gender,this.value7=t.ethnicity,this.value5=t.atSchoolStatus,this.province=t.province,this.city=t.city,this.area=t.area,this.form=t,this.form.id=t.id,this.allxue()},seccons4:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.addstudent(),t.dialogFormVisible=!1})},resetForm:function(e){this.$refs[e].resetFields(),this.dialogFormVisible=!1},handleClose:function(){this.$refs.ruleForm.resetFields(),this.dialogFormVisible=!1},seccons44:function(){var e=this,t={birthday:this.form.birthday,code:this.form.code,email:this.form.email,grade:Number(this.form.grade),idNumber:this.form.idNumber,name:this.form.name,phone:this.form.phone,academyId:this.value,specialtyId:this.value1,classId:this.value3,versionId:this.value6,gender:this.value4,ethnicity:this.value7,atSchoolStatus:this.value5,city:this.city,province:this.province,area:this.area,id:this.form.id};this.$put("/basic/student/edit",t).then(function(t){1==t.status?(e.form2=t.data,e.studentlist(),e.allxue1(),e.dialogFormVisible=!1):(e.$message("编辑失败"),e.dialogFormVisible=!0)})},close:function(){this.addst="添加学生",this.falg=!0,this.falg1=!1,this.dialogFormVisible=!0,this.value="",this.value1="",this.value2="",this.value3="",this.value4="",this.value5="",this.value6="",this.form={},this.allxue1()},handleDelete:function(e,t){var a=this;this.$confirm("确定删除该信息?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$deletes("/basic/student/del/"+t.id).then(function(e){1==e.status&&a.onSubmit()})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},indexMethod:function(e){return 1*e},handleSizeChange:function(e){this.pageSize=e,this.studentlist()},handleCurrentChange:function(e){this.pageNum=e,this.studentlist()}},mounted:function(){this.allxue(),this.atSchoolStatus(),this.onSubmit(),this.getNodes(),this.ethnicity(),this.classgrades(),this.versionall(),this.studentlist()}}),o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"students padding"},[a("div",[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/main/students"}}},[e._v("基础信息")]),e._v(" "),a("el-breadcrumb-item",[e._v("\n        学生管理\n      ")])],1)],1),e._v(" "),e._m(0),e._v(" "),a("div",{staticClass:"students-inp"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[a("span",{staticClass:"ssssss"},[e._v("所属学院：")]),e._v(" "),a("el-select",{staticClass:"pppp",attrs:{placeholder:"请选择学院"},on:{change:e.changes1},model:{value:e.value0,callback:function(t){e.value0=t},expression:"value0"}},e._l(e.options0,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),e._v(" "),a("span",{staticClass:"sssssss"},[e._v("所属专业：")]),e._v(" "),a("el-select",{staticClass:"pppp",attrs:{placeholder:"请先选择学院"},on:{change:e.changes3},model:{value:e.valuearr1,callback:function(t){e.valuearr1=t},expression:"valuearr1"}},e._l(e.optionsarr1,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),e._v(" "),a("span",{staticClass:"sssssss"},[e._v("所属年级：")]),e._v(" "),a("el-select",{staticClass:"pppp",attrs:{placeholder:"全部"},model:{value:e.valuearr2,callback:function(t){e.valuearr2=t},expression:"valuearr2"}},e._l(e.optionsarr2,function(e){return a("el-option",{key:e.index,attrs:{label:e.grade+"级",value:e.grade}})}),1),e._v(" "),a("span",{staticClass:"sssssss"},[e._v("所属班级：")]),e._v(" "),a("el-select",{staticClass:"pppp",attrs:{placeholder:"请先选择专业"},model:{value:e.valuearr3,callback:function(t){e.valuearr3=t},expression:"valuearr3"}},e._l(e.optionsarr3,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),a("br"),a("br"),a("br"),e._v(" "),a("span",{staticClass:"sssssssl"},[e._v("在校状态：")]),e._v(" "),a("el-select",{staticClass:"pppp",attrs:{placeholder:"全部"},model:{value:e.valuearr5,callback:function(t){e.valuearr5=t},expression:"valuearr5"}},e._l(e.optionsarr5,function(e){return a("el-option",{key:e.code,attrs:{label:e.value,value:e.code}})}),1),e._v(" "),a("el-form-item",{attrs:{label:"搜索:"}},[a("el-input",{attrs:{placeholder:"学号，姓名"},model:{value:e.formInline.code,callback:function(t){e.$set(e.formInline,"code",t)},expression:"formInline.code"}})],1),e._v(" "),a("el-form-item",[a("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("搜索")]),e._v("              \n          ")],1)],1),e._v(" "),a("div",{staticClass:"students-btn"},[a("el-button",{attrs:{type:"primary",round:""},on:{click:e.close}},[e._v("+ 新建")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.addst,visible:e.dialogFormVisible,"before-close":e.handleClose,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"ruleForm",attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{label:"所属学院：","label-width":e.formLabelWidth}},[a("el-select",{attrs:{placeholder:""},on:{change:e.changes2},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"所属专业：","label-width":e.formLabelWidth}},[a("el-select",{attrs:{placeholder:""},on:{change:e.changes33},model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}},e._l(e.options1,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"所属年级：","label-width":e.formLabelWidth}},[a("el-select",{attrs:{placeholder:""},model:{value:e.value2,callback:function(t){e.value2=t},expression:"value2"}},e._l(e.options2,function(e){return a("el-option",{key:e.id,attrs:{label:e.grade+"级",value:e.grade}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"所属班级：","label-width":e.formLabelWidth}},[a("el-select",{attrs:{placeholder:""},model:{value:e.value3,callback:function(t){e.value3=t},expression:"value3"}},e._l(e.options3,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"入学年级：","label-width":e.formLabelWidth,prop:"grade"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.grade,callback:function(t){e.$set(e.form,"grade",t)},expression:"form.grade"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"学号：","label-width":e.formLabelWidth,prop:"code"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"姓名：","label-width":e.formLabelWidth,prop:"name"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"性别：","label-width":e.formLabelWidth}},[a("el-select",{attrs:{placeholder:""},model:{value:e.value4,callback:function(t){e.value4=t},expression:"value4"}},e._l(e.options4,function(e){return a("el-option",{key:e.id,attrs:{label:e.value,value:e.code}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"民族：","label-width":e.formLabelWidth}},[a("el-select",{attrs:{placeholder:""},model:{value:e.value7,callback:function(t){e.value7=t},expression:"value7"}},e._l(e.options7,function(e){return a("el-option",{key:e.id,attrs:{label:e.value,value:e.code}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号：","label-width":e.formLabelWidth,prop:"phone"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱：","label-width":e.formLabelWidth,prop:"email"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"身份证号：","label-width":e.formLabelWidth,prop:"idNumber"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.idNumber,callback:function(t){e.$set(e.form,"idNumber",t)},expression:"form.idNumber"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"出生年月：","label-width":e.formLabelWidth,prop:"birthday"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"2019-05-17"},model:{value:e.form.birthday,callback:function(t){e.$set(e.form,"birthday",t)},expression:"form.birthday"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"地址：","label-width":e.formLabelWidth}},[a("el-cascader",{attrs:{placeholder:"请选择省市区",options:e.cascaderData,"change-on-select":!1,props:e.props},on:{"active-item-change":e.handleItemChange},model:{value:e.selectedOptions,callback:function(t){e.selectedOptions=t},expression:"selectedOptions"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"在校状态：","label-width":e.formLabelWidth}},[a("el-select",{attrs:{placeholder:""},model:{value:e.value5,callback:function(t){e.value5=t},expression:"value5"}},e._l(e.options5,function(e){return a("el-option",{key:e.code,attrs:{label:e.value,value:e.code}})}),1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("取 消")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.falg,expression:"falg"}],attrs:{type:"primary"},on:{click:function(t){return e.seccons4("ruleForm")}}},[e._v("确 定")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.falg1,expression:"falg1"}],attrs:{type:"primary"},on:{click:e.seccons44}},[e._v("确 定")])],1)],1),e._v(" "),a("div",{staticClass:"students-tab"},[[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",stripe:""}},[a("el-table-column",{attrs:{label:"学号",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.code))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"姓名"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"入学年级"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.grade)+"级")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"所属院校"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.academyVal))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"所属专业"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},[e._v(e._s(t.row.specialtyVal))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"所属班级"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.classVal))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"在校状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.atSchoolStatusVal))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[a("i",{staticClass:"el-icon-edit"}),e._v("  编辑")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[a("i",{staticClass:"el-icon-delete"}),e._v("  删除")])]}}])})],1)]],2),e._v(" "),a("div",[[a("div",{staticClass:"block"},[a("el-pagination",{attrs:{background:"","current-page":e.pageNum,"page-sizes":[15,30,40,50],"page-size":e.pageSize,layout:"prev, pager, next, jumper, sizes, total",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)]],2)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"examination-dv"},[t("img",{attrs:{src:a("W/al"),alt:""}}),this._v(" "),t("span",[this._v("学生管理")])])}]};var r=a("C7Lr")(i,o,!1,function(e){a("VIB+")},"data-v-6b3f1f1c",null);t.default=r.exports},"VIB+":function(e,t){}});
//# sourceMappingURL=76.b2d6214019cf6aaf840c.js.map