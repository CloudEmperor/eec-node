webpackJsonp([116],{t0Vr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"center questionnaireLibrary"},[i("div",{staticClass:"center_breadcrumb"},[i("crumb",[i("div",{staticClass:"new--btn",attrs:{slot:"right"},on:{click:t.openAdd},slot:"right"},[t._v("+ 新增")])])],1),t._v(" "),i("div",{staticClass:"center_content"},[i("div",{staticClass:"ability-query_side"},[i("h3",[t._v("问卷类型")]),t._v(" "),i("ul",t._l(t.sideMenu,function(e,s){return i("li",{key:s,class:{sideActive:t.activeNum===s},on:{click:function(i){return t.tabMenu(s,e.id)}}},[i("span",[t._v(t._s(e.classifyName))])])}),0)]),t._v(" "),i("div",{staticClass:"questionnaireLibrary-right"},[i("div",{staticClass:"center_content_search"},[i("div",{staticClass:"center_content_search_left"},[i("div",{staticClass:"search-input-suffix"},[i("label",[t._v("问卷名称：")]),t._v(" "),i("el-input",{staticClass:"search",attrs:{placeholder:"请输入搜索关键字"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search(e)}},model:{value:t.page.keyWord,callback:function(e){t.$set(t.page,"keyWord",e)},expression:"page.keyWord"}})],1),t._v(" "),i("div",{staticClass:"search--btn",staticStyle:{margin:"0 0 0 20px"},on:{click:t.search}},[t._v("搜索")])])]),t._v(" "),i("el-table",{staticStyle:{width:"100%","padding-bottom":"40px","border-radius":"10px","margin-bottom":"110px"},attrs:{data:t.list,stripe:""}},[i("el-table-column",{attrs:{label:"问卷名称","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                                   "+t._s(e.row.formName)+" \n                               ")]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"引用次数"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.refCount))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"操作",width:"220"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return t.openPreview(e.row.id)}}},[i("svgIcon",{attrs:{"icon-class":"iconyulan"}}),t._v("  预览\n                                   ")],1),t._v(" "),i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return t.openQuote(e.row)}}},[i("svgIcon",{attrs:{"icon-class":"iconyinyong"}}),t._v("  引用\n                                   ")],1),t._v(" "),i("el-button",{staticStyle:{color:"#ff5858"},attrs:{type:"text",size:"small"},on:{click:function(i){return t.discard(e.row.id)}}},[i("svgIcon",{attrs:{"icon-class":"iconshanchu"}}),t._v("  废弃\n                                   ")],1)]}}])})],1)],1)])])},staticRenderFns:[]};var n=i("C7Lr")({name:"QuestionnaireLibrary",components:{},data:function(){return{pageTitle:"问卷模板库",activeNum:0,sideMenu:[],list:[],page:{classifyId:"",keyword:""},api:{classify:"/form/rest/FormClassifyBusiness/listAll/v1",templateList:"/form/rest/FormTemplateMainBaseBusiness/listAll/v1",discardTemp:"/form/rest/FormMainBaseBusiness/discardTemp/v1"}}},created:function(){this.classifyAll()},mounted:function(){},methods:{classifyAll:function(){var t=this;this.$post(this.api.classify).then(function(e){200===e.code&&(t.sideMenu=e.data,t.page.classifyId=e.data[0].id,t.initData())})},initData:function(){var t=this;this.$post(this.api.templateList,this.page).then(function(e){200===e.code&&(e.data.forEach(function(t){t.off=!0,t.on=!0}),t.list=e.data)})},search:function(){this.initData()},tabMenu:function(t,e){this.activeNum=t,this.page.classifyId=e,this.initData()},openPreview:function(t){this.$router.push({path:"/evaluationAndFeedback/questionnairePreview",query:{id:t,entryType:"template"}})},openQuote:function(t){this.$router.push({path:"/evaluationAndFeedback/addQuestionnaire",query:{id:t.id,classifyId:t.classifyId,title:t.formName,entryType:"copyTemplate"}})},discard:function(t){var e=this;this.$post(this.api.discardTemp,{id:t}).then(function(t){200===t.code?(e.$notify.success({title:"success",duration:1500,message:"操作成功"}),e.initData()):e.$notify.error({title:"error",duration:1500,message:t.msg})})},enter:function(t,e,i){"preview"===t?this.list[e].off=!i:this.list[e].on=!i},leave:function(t,e,i){"preview"===t?this.list[e].off=!i:this.list[e].on=!i},openAdd:function(){this.$router.push({path:"/evaluationAndFeedback/addQuestionnaire",query:{entryType:"template"}})}}},s,!1,function(t){i("ylWw")},null,null);e.default=n.exports},ylWw:function(t,e){}});
//# sourceMappingURL=116.1e99238f4887279c683c.js.map