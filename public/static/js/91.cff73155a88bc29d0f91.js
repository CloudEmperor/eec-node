webpackJsonp([91],{"8U3T":function(t,e){},"Tx+/":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("oAV5"),n={name:"ResearchProgress",components:{},data:function(){return{pageTitle:["问卷调查","调查进度"],activeIndex:0,page:{classifyId:"0",keyword:"",page:1,pageSize:15},typeOptions:[],type:"process",tapOptions:[{name:"进行中的问卷",type:"process"},{name:"未发起的问卷",type:"unSubmit"}],data:{},tableData:[],api:{classify:"/form/rest/FormClassifyBusiness/listAll/v1",unSubmit:"/form/rest/FormMainBaseBusiness/listUnSubmit/v1",process:"/form/rest/FormMainBaseBusiness/listProcess/v1",stop:"/form/rest/FormMainBaseBusiness/stop/v1",discard:"/form/rest/FormMainBaseBusiness/discard/v1"}}},created:function(){this.type=this.$route.query.type||"process",this.activeIndex="process"===this.type?0:1,this.classifyAll(),this.initData()},mounted:function(){},methods:{classifyAll:function(){var t=this;this.$post(this.api.classify).then(function(e){200===e.code&&(t.typeOptions=e.data,t.typeOptions.unshift({classifyName:"全部",id:"0"}))})},initData:function(){var t=this;this.$post("process"===this.type?this.api.process:this.api.unSubmit,this.page).then(function(e){200===e.code?(t.data=e.data,t.tableData=e.data.rows):t.$notify.error({title:"error",duration:1500,message:"获取列表失败"})})},search:function(){this.resetTemp(),this.initData()},activeTab:function(t,e){this.activeIndex=e,this.type=t,this.resetTemp(),this.initData()},handleEntering:function(t){this.$router.push({path:"/evaluationAndFeedback/questionnaireOperation",query:{id:t}})},stopRow:function(t){var e=this;"unSubmit"!==this.type?this.$confirm("确定停止收集该问卷?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$post(e.api.stop,{formId:t}).then(function(t){200===t.code?(e.$notify.success({title:"success",duration:1500,message:"操作成功"}),e.initData()):e.$notify.error({title:"error",duration:1500,message:t.msg})})}).catch(function(){e.$message({type:"info",message:"已取消"})}):this.$router.push({path:"/evaluationAndFeedback/publish",query:{id:t}})},discardRow:function(t){var e=this;this.$confirm("确定废弃该问卷?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$post(e.api.discard,{formId:t}).then(function(t){200===t.code?(e.$notify.success({title:"success",duration:1500,message:"操作成功"}),e.initData()):e.$notify.error({title:"error",duration:1500,message:t.msg})})}).catch(function(){e.$message({type:"info",message:"已取消"})})},previewRow:function(t){this.$router.push({path:"/evaluationAndFeedback/questionnairePreview",query:{id:t,entryType:"new"}})},startAnswer:function(t){var e="http://"+window.location.host+"/#/test?id="+t;console.log(e),window.open(e)},editRow:function(t){this.$router.push({path:"/evaluationAndFeedback/addQuestionnaire",query:{id:t.id,classifyId:t.classifyId,title:t.formName,entryType:"edit"}})},handleSizeChange:function(t){this.page.pageSize=t,this.initData()},handleCurrentChange:function(t){this.page.page=t,this.initData()},resetTemp:function(){this.page.page=1,this.page.pageSize=15}},filters:{time:function(t){return t?Object(a.a)(t,"yyyy-MM-dd"):""}}},i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"center"},[s("div",{staticClass:"center_breadcrumb"},[s("crumb",{attrs:{data:t.pageTitle}})],1),t._v(" "),s("div",{staticClass:"center_content"},[s("div",{staticClass:"center_content_search"},[s("div",{staticClass:"center_content_search_left"},[s("div",{staticClass:"search-input-suffix gap"},[s("label",[t._v("问卷类型：")]),t._v(" "),s("el-select",{attrs:{placeholder:"全部"},model:{value:t.page.classifyId,callback:function(e){t.$set(t.page,"classifyId",e)},expression:"page.classifyId"}},t._l(t.typeOptions,function(t){return s("el-option",{key:t.id,attrs:{label:t.classifyName,value:t.id}})}),1)],1),t._v(" "),s("div",{staticClass:"search-input-suffix"},[s("label",[t._v("问卷搜索：")]),t._v(" "),s("el-input",{staticClass:"search",attrs:{placeholder:"请输入搜索关键词",clearable:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search(e)}},model:{value:t.page.keyword,callback:function(e){t.$set(t.page,"keyword",e)},expression:"page.keyword"}}),t._v(" "),s("div",{staticClass:"search--btn",staticStyle:{"margin-left":"20px"},on:{click:t.search}},[t._v("搜索")])],1)])]),t._v(" "),s("div",{staticClass:"center_content_search"},[s("div",{staticClass:"center_content_search_left"},[s("div",{staticClass:"search-input-suffix"},[t._l(t.tapOptions,function(e,a){return[s("el-button",{key:a,staticClass:"versions-btn",class:{" versions-gray":a!==t.activeIndex},attrs:{type:"primary"},on:{click:function(s){return t.activeTab(e.type,a)}}},[t._v(t._s(e.name))])]})],2)])]),t._v(" "),s("div",{staticClass:"table-container"},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,stripe:""}},[s("el-table-column",{attrs:{label:"问卷名称","show-overflow-tooltip":!0,width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                       "+t._s(e.row.formName)+"\n                   ")]}}])}),t._v(" "),s("el-table-column",{attrs:{prop:"classifyName",label:"问卷类型"}}),t._v(" "),s("el-table-column",{attrs:{prop:"code",label:"样本"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                   "+t._s(e.row.receiveNum+"/"+e.row.sendNum)+"\n               ")]}}])}),t._v(" "),s("el-table-column",{attrs:{label:"操作",width:"330"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticClass:"operate-button distance"},[s("SvgIcon",{attrs:{"icon-class":"process"===t.type?"icontingzhishouji":"iconfaqidiaocha"}}),t._v(" "),s("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(s){return s.preventDefault(),t.stopRow(e.row.id)}}},[t._v("\n                       "+t._s("process"===t.type?"停止收集":"发起问卷")+"\n                       ")])],1),t._v(" "),s("div",{staticClass:"operate-button distance"},[s("SvgIcon",{attrs:{"icon-class":"iconshanchu"}}),t._v(" "),s("el-button",{staticStyle:{color:"#ff5858"},attrs:{type:"text",size:"small"},nativeOn:{click:function(s){return s.preventDefault(),t.discardRow(e.row.id)}}},[t._v("\n                       废弃\n                       ")])],1),t._v(" "),s("div",{staticClass:"operate-button"},[s("SvgIcon",{attrs:{"icon-class":"iconyulan"}}),t._v(" "),s("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(s){return s.preventDefault(),t.previewRow(e.row.id)}}},[t._v("\n                       预览\n                       ")])],1),t._v(" "),"unSubmit"===t.type?s("div",{staticClass:"operate-button"},[s("SvgIcon",{attrs:{"icon-class":"iconyulan"}}),t._v(" "),s("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(s){return s.preventDefault(),t.editRow(e.row)}}},[t._v("\n                       编辑\n                       ")])],1):t._e()]}}])})],1),t._v(" "),s("div",{staticClass:"center_pagination"},[s("el-pagination",{attrs:{background:"","current-page":t.page.page,"page-sizes":[15,30,40,50],"page-size":t.page.pageSize,layout:"prev, pager, next, jumper, sizes, total",total:t.data.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)])])},staticRenderFns:[]};var o=s("C7Lr")(n,i,!1,function(t){s("8U3T")},null,null);e.default=o.exports}});
//# sourceMappingURL=91.cff73155a88bc29d0f91.js.map