webpackJsonp([110],{MmAK:function(e,t){},NZX4:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("3cXf"),a=s.n(i),r={data:function(){return{userName:localStorage.getItem("userName"),listQuery:{grade:"",term:"",keyword:"",page:1,rows:15},rules:{courseId:[{required:!0,message:"请选择课程",trigger:"blur"}],grade:[{required:!0,message:"请选择学年",trigger:"blur"}],term:[{required:!0,message:"请选择学期",trigger:"blur"}],teacherIds:[{required:!0,message:"请选择成员",trigger:"blur"}]},teamList:[],userDialogFormVisible:!1,yearOptions:[],termOptions:[{id:1,label:"第一学期"},{id:2,label:"第二学期"}],tableData:[],dialogTitle:"新建教学团队",form:{courseId:"",grade:"",term:"",teacherIds:""},teacher:"",courseOptions:[],teacherOptions:[],total:0,bodyLoading:!1}},mounted:function(){this.schedulingGrades(),this.courseAll(),this.teacherAll(),this.getList()},methods:{resetQuery:function(){this.listQuery={grade:"",term:"",keyword:"",page:1,rows:15}},openAdd:function(){var e=this;this.userDialogFormVisible=!0,this.dialogTitle="新建教学团队",this.form={courseId:"",grade:"",term:"",teacherIds:""},this.teacher="",this.teamList=[],this.$nextTick(function(){e.$refs.form.resetFields()})},handleEdit:function(e){var t=this;this.userDialogFormVisible=!0,this.dialogTitle="编辑教学团队",this.$nextTick(function(){t.form=JSON.parse(a()(e)),t.teacher="",t.teamList=[],""===t.form.teacherIds?t.form.teacherIds="":t.form.teacherIds.split(",").forEach(function(s,i){t.teamList.push({id:s,name:e.teacherNames.split(",")[i]})}),t.$refs.form.resetFields()})},submitAdd:function(e){var t=this,s=[];this.teamList.length>0?(this.teamList.forEach(function(e){s.push(e.id)}),this.form.teacherIds=s.join(",")):this.form.teacherIds="",this.$refs[e].validate(function(e){e&&t.$post("/basic/scheduling/addTeacherTeam",t.form).then(function(e){1===e.status?(t.$notify.success({title:"提示",message:e.message,duration:2e3}),t.resetQuery(),t.getList(),t.userDialogFormVisible=!1):t.$notify.error({title:"提示",message:e.message,duration:2e3})})})},submitEdit:function(e){var t=this,s=[];this.teamList.length>0?(this.teamList.forEach(function(e){s.push(e.id)}),this.form.teacherIds=s.join(",")):this.form.teacherIds="",this.$refs[e].validate(function(e){if(e){var s={courseId:t.form.courseId,grade:t.form.grade,term:t.form.term,teacherIds:t.form.teacherIds,schedulingIds:t.form.schedulIds};t.$put("/basic/scheduling/editTeacherTeam",s).then(function(e){1===e.status?(t.$notify.success({title:"提示",message:e.message,duration:2e3}),t.resetQuery(),t.getList(),t.userDialogFormVisible=!1):t.$notify.error({title:"提示",message:e.message,duration:2e3})})}})},handleDelete:function(e){var t=this;this.$confirm("此操作将删除学校信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var s={schedulingIds:e.schedulIds};t.$post("/basic/scheduling/deleteTeam",s).then(function(e){1===e.status?(t.$notify.success({title:"提示",message:e.message,duration:2e3}),t.resetQuery(),t.getList()):t.$notify.error({title:"提示",message:e.message,duration:2e3})})}).catch(function(){t.$notify.error({title:"提示",message:"已取消删除!",duration:2e3})})},addTeacher:function(){var e=this;if(""!=this.teacher){var t=this.teacherOptions.find(function(t){return t.id===e.teacher});this.teamList.find(function(e){return e.id===t.id})?this.$notify({title:"提示",message:"该老师已被添加！",type:"warning",duration:1500}):this.teamList.push(t)}},deleteTeacher:function(e){this.teamList.splice(e,1)},handleSizeChange:function(e){this.listQuery.rows=e,this.getList()},handleCurrentChange:function(e){this.listQuery.page=e,this.getList()},getList:function(){var e=this;this.bodyLoading=!0,this.$post("/basic/scheduling/teamlist",this.listQuery).then(function(t){1===t.status?(e.tableData=t.data,e.total=t.total):e.$notify.error({title:"提示",message:t.message,duration:2e3}),e.bodyLoading=!1}).catch(function(t){e.bodyLoading=!1})},schedulingGrades:function(){var e=this;this.$get("basic/version/grades").then(function(t){1===t.status?e.yearOptions=t.data:e.$notify.error({title:"error",duration:1500,message:t.message})})},courseAll:function(){var e=this;this.$get("/basic/scheduling/courseByLeader").then(function(t){1===t.status?e.courseOptions=t.data:e.$notify.error({title:"error",duration:1500,message:t.message})}).catch(function(e){console.log(e)})},teacherAll:function(){var e=this;this.$get("/basic/teacher/realall").then(function(t){1===t.status?e.teacherOptions=t.data:e.$notify.error({title:"error",duration:1500,message:t.message})})}}},l={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"loading",rawName:"v-loading.body",value:e.bodyLoading,expression:"bodyLoading",modifiers:{body:!0}}],staticClass:"teachingTeam padding students"},[s("crumb",{staticStyle:{padding:"0 5px"}},[s("div",{staticClass:"new--btn",attrs:{slot:"right"},on:{click:e.openAdd},slot:"right"},[e._v("+ 新建")])]),e._v(" "),s("div",{staticClass:"teachers1-inp"},[s("el-form",{staticClass:"demo-form-inline"},[s("span",{staticClass:"ssssss"},[e._v("学年：")]),e._v(" "),s("el-select",{staticClass:"pppp",attrs:{placeholder:"请选择学年"},model:{value:e.listQuery.grade,callback:function(t){e.$set(e.listQuery,"grade",t)},expression:"listQuery.grade"}},[s("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),e._l(e.yearOptions,function(e){return s("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})],2),e._v(" "),s("span",{staticClass:"sssss"},[e._v("学期：")]),e._v(" "),s("el-select",{staticClass:"pppp",attrs:{placeholder:"请先选择学年"},model:{value:e.listQuery.term,callback:function(t){e.$set(e.listQuery,"term",t)},expression:"listQuery.term"}},[s("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),e._l(e.termOptions,function(e){return s("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})})],2),e._v(" "),s("span",{staticClass:"sssss"},[e._v("课程搜索：")]),e._v(" "),s("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入课程"},model:{value:e.listQuery.keyword,callback:function(t){e.$set(e.listQuery,"keyword",t)},expression:"listQuery.keyword"}}),e._v(" "),s("div",{staticClass:"search--btn",staticStyle:{margin:"5px 0 20px 20px"},on:{click:e.getList}},[e._v("搜索")])],1)],1),e._v(" "),s("div",{staticClass:"teachers1-tab"},[[s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""}},[s("el-table-column",{attrs:{label:"课程编码",width:"100",prop:"code"}}),e._v(" "),s("el-table-column",{attrs:{label:"课程名称",prop:"name",width:"250"}}),e._v(" "),s("el-table-column",{attrs:{label:"学年",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(t.row.grade)+" - "+e._s(Number(t.row.grade)+1)+"学年")])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"课程负责人",prop:"realName",width:"150"}}),e._v(" "),s("el-table-column",{attrs:{label:"团队成员",prop:"teacherNames"}}),e._v(" "),s("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(s){return e.handleEdit(t.row)}}},[s("SvgIcon",{attrs:{"icon-class":"iconbianji1"}}),e._v("  编辑\n            ")],1),e._v(" "),s("el-button",{staticStyle:{color:"#ff5858"},attrs:{type:"text",size:"small"},on:{click:function(s){return e.handleDelete(t.row)}}},[s("SvgIcon",{attrs:{"icon-class":"iconshanchu"}}),e._v("  删除\n            ")],1)]}}])})],1)]],2),e._v(" "),s("el-dialog",{staticClass:"set-el-dialog",attrs:{width:"40%",title:e.dialogTitle,visible:e.userDialogFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.userDialogFormVisible=t}}},[s("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[s("el-form-item",{attrs:{label:"选择课程：",prop:"courseId"}},[s("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择课程",size:"small"},model:{value:e.form.courseId,callback:function(t){e.$set(e.form,"courseId",t)},expression:"form.courseId"}},e._l(e.courseOptions,function(e){return s("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),s("el-form-item",{attrs:{label:"选择学年：",prop:"grade"}},[s("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择学年",size:"small"},model:{value:e.form.grade,callback:function(t){e.$set(e.form,"grade",t)},expression:"form.grade"}},e._l(e.yearOptions,function(e){return s("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),s("el-form-item",{attrs:{label:"选择学期：",prop:"term"}},[s("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择学期：",size:"small"},model:{value:e.form.term,callback:function(t){e.$set(e.form,"term",t)},expression:"form.term"}},e._l(e.termOptions,function(e){return s("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1)],1),e._v(" "),s("el-form-item",{attrs:{label:"课程负责人："}},[s("div",[e._v(e._s(e.userName))])]),e._v(" "),s("el-form-item",{attrs:{label:"选择教师："}},[s("el-select",{staticStyle:{width:"50%"},attrs:{filterable:"",placeholder:"请选择教师",size:"small"},model:{value:e.teacher,callback:function(t){e.teacher=t},expression:"teacher"}},e._l(e.teacherOptions,function(e){return s("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),e._v(" "),s("div",{staticClass:"teachers1_add",on:{click:e.addTeacher}},[e._v("+添加到团队")])],1),e._v(" "),s("el-form-item",{attrs:{label:"已添加成员：",prop:"teacherIds"}},e._l(e.teamList,function(t,i){return s("div",{key:i,staticClass:"teachers1_name"},[e._v("\n          "+e._s(t.name)+"   \n          "),s("i",{staticClass:"el-icon-circle-close",staticStyle:{cursor:"pointer"},on:{click:function(t){return e.deleteTeacher(i)}}})])}),0)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{size:"small"},on:{click:function(t){e.userDialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),"新建教学团队"===e.dialogTitle?s("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.submitAdd("form")}}},[e._v("确 定")]):s("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.submitEdit("form")}}},[e._v("确 定")])],1)],1),e._v(" "),s("div",[[s("div",{staticClass:"block"},[s("el-pagination",{attrs:{background:"","current-page":e.listQuery.page,"page-sizes":[15,30,40,50],"page-size":e.listQuery.rows,layout:"prev, pager, next, jumper, sizes, total",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)]],2)],1)},staticRenderFns:[]};var o=s("C7Lr")(r,l,!1,function(e){s("MmAK")},null,null);t.default=o.exports}});
//# sourceMappingURL=110.431cdab9592525d47703.js.map