webpackJsonp([46],{NSuc:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("HzJ8"),a=s.n(i),n=function(){function t(t){var e,s={times:1,num:0};if(e=t,Math.floor(e)===e)return s.num=t,s;var i=t+"",a=i.indexOf("."),n=i.substr(a+1).length,r=Math.pow(10,n),o=parseInt(t*r+.5,10);return s.times=r,s.num=o,s}function e(e,s,i,a){var n=t(e),r=t(s),o=n.num,l=r.num,u=n.times,c=r.times,d=u>c?u:c;switch(a){case"add":return(u===c?o+l:u>c?o+l*(u/c):o*(c/u)+l)/d;case"subtract":return(u===c?o-l:u>c?o-l*(u/c):o*(c/u)-l)/d;case"multiply":return o*l/(u*c);case"divide":return o/l*(c/u)}}return{add:function(t,s,i){return e(t,s,0,"add")},subtract:function(t,s,i){return e(t,s,0,"subtract")},multiply:function(t,s,i){return e(t,s,0,"multiply")},divide:function(t,s,i){return e(t,s,0,"divide")}}}(),r={name:"TestWorld",data:function(){var t=this;return{fullWidth:document.documentElement.clientWidth,content:"",AllList:[],videolist:[],course_id:this.$route.query.id,coursename:this.$route.query.name,type:this.$route.query.type,grade:this.$route.query.grade,scheduId:this.$route.query.scheduId,examineArr:[{name:null,examId:null}],selected:[],ruleForm2:{pass:"",checkPass:"",age:""},rules2:{ratio:[{validator:function(e,s,i){var r=t;function o(t){var e=0,s=!0,r=!1,o=void 0;try{for(var l,u=a()(t);!(s=(l=u.next()).done);s=!0){var c=l.value.ratio||0;e=n.add(e,c)}}catch(t){r=!0,o=t}finally{try{!s&&u.return&&u.return()}finally{if(r)throw o}}return 1===e?"next":i(new Error("评价依据权重总和等于1"))}for(var l=0,u=r.AllList.length;l<u;l++)if("next"===o(r.AllList[l].goalExamList)){if(!r.AllList[l+1]){i();break}o(r.AllList[l+1].goalExamList)}},trigger:"blur"}]}}},mounted:function(){this.getexamgoal()},methods:{getexamgoal:function(){var t=this,e="/basic/courseGoal/examCourseGoalList/"+this.$route.query.id+"/"+this.$route.query.scheduId;this.$get(e).then(function(e){1==e.status&&(t.AllList=e.data.list||[],t.examineArr=e.data.examList)})},getTraExaminePatternDTO:function(t){var e=this,s=[];this.examineArr.forEach(function(t){s.push({courseId:e.$route.query.id,scheduId:e.$route.query.scheduId,name:t.name,id:t.examId})}),this.$post("/basic/examine/addExamine",s).then(function(t){1===t.status&&setTimeout(function(){e.getexamgoal()},600)})},addkaohe:function(){this.getTraExaminePatternDTO()},addExamine:function(t){this.examineArr.push({name:null,id:null})},addExamine1:function(t){var e=this;this.AllList[t].goalExamList.push({selected:null,ratio:null}),this.AllList[t].goalExamList.forEach(function(t){t.selected=e.examineArr})},setCourseDel:function(t,e){var s=this;this.$deletes("/basic/examine/delExamine/"+t+"/"+this.$route.query.id).then(function(t){1===t.status?(s.$notify.success({title:"success",duration:1500,message:"删除成功"}),s.getexamgoal()):s.$notify.error({title:"error",duration:1500,message:t.message})}).catch(function(t){console.log(t)})},setCourseDel1:function(t,e,s){var i=this;this.$get("/basic/courseGoal/delExamCourseGoal/"+t).then(function(t){1===t.status?(i.$notify.success({title:"success",duration:1500,message:"删除成功"}),i.getexamgoal()):i.$notify.error({title:"error",duration:1500,message:t.message})}).catch(function(t){console.log(t)})},delExamine:function(t,e){t.examId?this.setCourseDel(t.examId,e):(this.$notify.success({title:"success",duration:1500,message:"删除成功"}),this.examineArr.splice(e,1))},delratio:function(t,e,s){t.id?this.setCourseDel1(t.id,e,s):(this.$notify.success({title:"success",duration:1500,message:"删除成功"}),this.AllList[e].goalExamList.splice(s,1))},submit:function(t,e){var s=this,i=[];if(this.AllList.forEach(function(t,e){t.goalExamList.forEach(function(e){i.push({examId:e.examId,courseGoalId:t.goalId,ratio:e.ratio,id:e.id||"",scheduId:s.$route.query.scheduId})})}),0===t&&0===this.examineArr.length&&0===i.length)return this.$refs[e].resetFields(),void this.userSave(t,i);this.$refs[e].validate(function(e){e?s.userSave(t,i):s.$notify.warning({title:"warning",duration:1500,message:"评价依据权重总和等于1"})})},userSave:function(t,e){var s=this;this.$post("/basic/courseGoal/addExamCourseGoal",e).then(function(e){1===e.status?0===t?(s.getexamgoal(),s.$notify.success({title:"success",duration:1500,message:"保存成功"})):s.$router.push({path:"/Construction/ToconfigureHubeinext",query:{id:s.$route.query.id,coursename:s.$route.query.name,scheduId:s.$route.query.scheduId}}):s.$notify.error({title:"error",duration:1500,message:e.message})})}}},o={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ToconfigureHubei students"},[t._m(0),t._v(" "),s("div",{staticClass:"ToconfigureHubei-dv1"},[s("h2",[t._v("《"+t._s(t.coursename)+"》课程试卷配置")]),t._v(" "),t._m(1)]),t._v(" "),s("div",{staticStyle:{"padding-top":"29px","background-color":"#fff"}},[t._m(2),t._v(" "),t._l(t.examineArr,function(e,i){return s("div",{key:i,staticClass:"examine"},[s("el-row",[s("el-col",{attrs:{span:1920==t.fullWidth?2:3}},[s("div",{staticClass:"examine_dv"},[t._v("评价依据"+t._s(i+1))])]),t._v(" "),s("el-col",{attrs:{span:11}},[s("el-input",{attrs:{"controls-position":"right",placeholder:"请选择考核方式"},model:{value:e.name,callback:function(s){t.$set(e,"name",s)},expression:"vo.name"}}),t._v(" "),s("i",{staticClass:"el-icon-circle-close del-icon hubei-close",style:{left:1920==t.fullWidth?"55%":"59%"},on:{click:function(s){return t.delExamine(e,i)}}})],1)],1)],1)}),t._v(" "),s("div",{staticClass:"setCourseTitle add-examine-button",on:{click:t.addExamine}},[s("SvgIcon",{staticClass:"setCourseTitle_svg",attrs:{"icon-class":"icontianjia",size:"20px"}}),t._v(" "),s("span",{staticClass:"setCourseTitle_span"},[t._v("添加评价依据")])],1)],2),t._v(" "),s("div",{staticClass:"ToconfigureHubei_ss"},[s("span",{staticClass:"ToconfigureHubei_ss1",on:{click:t.addkaohe}},[t._v("将评价依据填入下表")])]),t._v(" "),s("el-form",{ref:"ruleForm2",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm2,"status-icon":"",rules:t.rules2}},[s("el-form-item",{attrs:{prop:"ratio"}},t._l(t.AllList,function(e,i){return s("div",{key:i,staticClass:"ToconfigureHubei-dv2"},[s("h2",{staticClass:"ToconfigureHubei-dv2h2"},[t._v(t._s(e.name)+"评价依据及权重")]),t._v(" "),s("table",{staticClass:"el-table el-table--border",attrs:{cellspacing:"0",cellpadding:"0",border:"0"}},[s("colgroup",[s("col"),t._v(" "),s("col"),t._v(" "),s("col")]),t._v(" "),s("tr",[s("th",{staticStyle:{width:"50px","text-align":"center"}},[t._v("编号")]),t._v(" "),s("th",{staticStyle:{width:"600px","text-align":"center"}},[t._v("评价依据")]),t._v(" "),s("th",{staticStyle:{width:"200px","text-align":"center"}},[t._v("权重")])]),t._v(" "),t._l(e.goalExamList,function(e,a){return s("tr",{key:a},[s("td",[s("span",{staticStyle:{"text-align":"center"}},[t._v(t._s(a+1))])]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[s("el-select",{staticStyle:{width:"98%"},attrs:{placeholder:"请选择评价依据"},model:{value:e.examId,callback:function(s){t.$set(e,"examId",s)},expression:"iteme.examId"}},t._l(e.selected,function(t){return s("el-option",{key:t.examId,attrs:{label:t.name,value:t.examId}})}),1)],1),t._v(" "),s("td",[s("el-input-number",{attrs:{"controls-position":"right",min:0,max:1,placeholder:"权重"},model:{value:e.ratio,callback:function(s){t.$set(e,"ratio",s)},expression:"iteme.ratio"}}),t._v(" "),s("i",{staticClass:"el-icon-circle-close del-icon",staticStyle:{cursor:"pointer"},on:{click:function(s){return t.delratio(e,i,a)}}})],1)])})],2),t._v(" "),s("div",{staticClass:"setCourseTitle add-examine-button",on:{click:function(e){return t.addExamine1(i)}}},[s("SvgIcon",{staticClass:"setCourseTitle_svg",attrs:{"icon-class":"icontianjia",size:"20px"}}),t._v(" "),s("span",{staticClass:"setCourseTitle_span"},[t._v("添加评价依据")])],1),t._v(" "),s("div",{staticClass:"setCourseTitle tishi"},[t._v("* 评价依据权重总和等于1")])])}),0)],1),t._v(" "),s("div",{staticClass:"ToconfigureHubei-dv3"},[[s("div",{staticClass:"search--btn",staticStyle:{margin:"0 0 0 20px"},on:{click:function(e){return t.submit(t.next=0,"ruleForm2")}}},[t._v("保 存")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submit(t.next=1,"ruleForm2")}}},[t._v("下一步")])]],2)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"ToconfigureHubei-dv"},[e("span",{staticClass:"spano"},[this._v("试卷配置")]),this._v(" > "),e("span",{staticClass:"spant"},[this._v("配置考查内容与课程目标对应关系")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ToconfigureHubei_dv"},[s("ul",[s("li",[s("span",{staticClass:"ToconfigureHubei_span1"},[t._v("1")]),t._v(" "),s("span",{staticClass:"ToconfigureHubei_span2"},[t._v("课程目标评价依据")])]),t._v(" "),s("li",{staticStyle:{color:"#fff"}},[t._v("••••＞")]),t._v(" "),s("li",[s("span",{staticClass:"ToconfigureHubei_span3"},[t._v("2")]),t._v(" "),s("span",{staticClass:"ToconfigureHubei_span2"},[t._v("考查内容与课程目标对应关系")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"setCourseTitle"},[e("span",[this._v("课程评价依据")])])}]};var l=s("C7Lr")(r,o,!1,function(t){s("s+UZ")},null,null);e.default=l.exports},"s+UZ":function(t,e){}});
//# sourceMappingURL=46.663a5327eddad048c096.js.map