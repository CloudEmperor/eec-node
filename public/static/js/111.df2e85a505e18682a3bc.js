webpackJsonp([111],{oycL:function(t,e){},"zh+F":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o("3cXf"),s=o.n(i),n=o("+fBX"),a=o("g416"),r={name:"TrainingObjectiveCreate",components:{Editor:n.a},data:function(){return{pageName:"培养目标",pageTitleArr:[],type:this.$route.query.type,id:this.$route.query.id,titlebarShow:!1,versionOptions:[],introduction:"",form:{versionId:"",content:"",goals:[{content:"",code:1}],id:void 0},explain:["（1）有公开的、符合学校定位的、适应社会经济发展需要的培养目标。","     需要说明的情况：","     给出本专业培养目标的完整文字表述，说明毕业生就业的专业领域、职业特征、职业定位以及应该具备的职业能力。","     分别阐述说明专业培养目标与学校定位、专业人才培养定位、社会经济发展需要的关系。","     培养目标公开的渠道，以及学生、教师和社会了解和认知情况。","     需要提供的支撑材料：专业培养目标制定和论证文件记录（附件中提供列表说明）学校定位和专业人才培养定位的相关文件专业人才培养与社会经济发展需求分析","（2）定期评价培养目标的合理性并根据评价结果对培养目标进行修订，评价与修订过程有行业或企业专家参与。","     需要说明的情况：","     培养目标合理性评价的制度和措施。","     培养目标合理性评价的主要内容。","     评价内容和方法，包括基础信息的种类、收集方法、收集对象和处理方法，以及评价结果的形成过程等。","     最近一次的评价情况和评价结果。","     当前执行的培养目标修订制度，包括修订周期、修订程序、参与人员以及主要执行人。","     最近一次修订情况，包括修订的时间、内容和依据等，应说明培养目标合理性评价结果在修订过程中发挥的作用等。","     行业企业专家参与培养目标修订的有关规定，以及在最近一次修订工作中行业企业专家发挥的作用。","     需要提供的支撑材料：培养目标合理性评价制度文件近3年进行的培养目标合理性评价原始材料（附件中提供列表说明）培养方案修订制度近3年培养方案修订原始材料（附件中提供列表说明）"],rules:{goals:[{validator:function(t,e,o){var i=0;if(e.length>0){if(e.forEach(function(t){t.content||i++}),0!==i)return o(new Error("请输入目标内容"));o()}else o()},trigger:"blur"}]}}},created:function(){this.pageName=this.$route.query.pageTitle[1],this.pageTitleArr=[this.$route.query.pageTitle[0],this.$route.query.pageTitle[1]+("add"===this.$route.query.type?"新增":"编辑")]},mounted:function(){this.versionAll(),"edit"===this.type&&this.goalInfo()},computed:{titleType:function(){return"add"===this.$route.query.type?"新增":"编辑"}},methods:{versionAll:function(){var t=this,e=a.a.versionAll;this.$get(e).then(function(e){1===e.status?(e.data.forEach(function(t){t.label=t.name}),t.versionOptions=e.data):t.$notify.error({title:"error",duration:1500,message:e.message})}).catch(function(t){console.log(t)})},goalInfo:function(){var t=this,e=a.a.goalInfo({id:this.id});this.$get(e).then(function(e){if(1===e.status){t.introduction=e.data.content;var o=e.data.goals.map(function(t){return{content:t.content,code:+t.code,id:t.id}});t.form={versionId:e.data.versionId,content:e.data.content,goals:o}}else t.$notify.error({title:"error",duration:1500,message:e.message})}).catch(function(t){console.log(t)})},titlebar:function(){this.titlebarShow=!0},addGoal:function(){this.form.goals.push({content:"",code:this.form.goals.length+1})},goalsDel:function(t,e){t.id?this.goalSuDel(t.id,e):(this.$notify.success({title:"success",duration:1500,message:"删除成功"}),this.form.goals.splice(e,1))},save:function(t){var e=this;this.$refs[t].validate(function(t){if(t){var o=JSON.parse(s()(e.form));o.goals=1===e.form.goals.length&&""===e.form.goals[0].content?[]:e.form.goals,o.id="add"===e.$route.query.type?void 0:e.id,o.versionId=localStorage.getItem("versionId"),"add"===e.type?e.userAdd(o):e.userEdit(o)}})},userAdd:function(t){var e=this,o=a.a.goalAdd;this.$post(o,t).then(function(t){1===t.status?(e.$notify.success({title:"success",duration:1500,message:t.message}),setTimeout(function(){e.$router.push("/trainingProgram/trainingObjective")},800)):e.$notify.error({title:"error",duration:1500,message:t.message})}).catch(function(t){console.log(t)})},userEdit:function(t){var e=this,o=a.a.goalEdit;this.$put(o,t).then(function(t){1===t.status?(e.$notify.success({title:"success",duration:1500,message:t.message}),setTimeout(function(){e.$router.push("/trainingProgram/trainingObjective")},800)):e.$notify.error({title:"error",duration:1500,message:t.message})}).catch(function(t){console.log(t)})},goalSuDel:function(t,e){var o=this,i=a.a.goalSuDel({id:t});this.$deletes(i).then(function(t){1===t.status?(o.$notify.success({title:"success",duration:1500,message:"删除成功"}),o.form.goals.splice(e,1)):o.$notify.error({title:"error",duration:1500,message:t.message})}).catch(function(t){console.log(t)})}}},l={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"create-page"},[o("div",{staticClass:"create-page_breadcrumb"},[o("Crumb")],1),t._v(" "),o("div",{staticClass:"create-page_content"},[o("div",{staticClass:"create-page_title"},[o("div",{staticClass:"create-page_title-font"},[o("SvgIcon",{attrs:{"icon-class":"iconyijianfankui",size:"17px"}}),t._v(" "),o("span",[t._v(t._s(t.pageName))])],1),t._v(" "),o("div",{staticClass:"create-page_title-tips",on:{click:function(e){return e.stopPropagation(),t.titlebar(e)}}},[o("i",{staticClass:"el-icon-question question"}),t._v(" "),o("SvgIcon",{attrs:{"icon-class":"iconshuoming"}}),t._v(" "),t.titlebarShow?o("div",{staticClass:"titlebar"},[o("div",{staticClass:"titlebar_header"},[o("i",{staticClass:"el-icon-close",on:{click:function(e){e.stopPropagation(),t.titlebarShow=!1}}})]),t._v(" "),o("div",{staticClass:"titlebar_body",staticStyle:{"padding-bottom":"10px","box-sizing":"border-box"}},[o("h6",[t._v("说明")]),t._v(" "),t._l(t.explain,function(e,i){return o("p",{key:i,domProps:{textContent:t._s(e)}})})],2)]):t._e()],1)]),t._v(" "),o("div",{staticClass:"create-page_body",staticStyle:{padding:"20px 20px 100px 20px"}},[o("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"120px"}},[o("el-form-item",{staticStyle:{display:"none"},attrs:{label:"培养方案版本:",prop:"versionId"}},[o("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.versionId,callback:function(e){t.$set(t.form,"versionId",e)},expression:"form.versionId"}},t._l(t.versionOptions,function(t){return o("el-option",{key:t.id,attrs:{label:t.label,value:t.id}})}),1)],1),t._v(" "),o("el-form-item",{attrs:{label:"培养目标:",prop:"content"}},[o("editor",{attrs:{"upload-url":"api","input-content":t.introduction},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"详细目标:",prop:"goals"}},[o("div",{staticClass:"goal-content"},t._l(t.form.goals,function(e,i){return o("p",{key:i},[o("el-input",{staticClass:"goal-order",staticStyle:{"margin-right":"8px"},attrs:{disabled:""}},[o("template",{slot:"prepend"},[t._v(t._s(e.code))])],2),t._v(" "),o("el-input",{staticClass:"goal-content_textarea",attrs:{type:"textarea",placeholder:"请输入内容"},model:{value:e.content,callback:function(o){t.$set(e,"content",o)},expression:"vo.content"}}),t._v(" "),o("i",{staticClass:"el-icon-circle-close del-icon",on:{click:function(o){return t.goalsDel(e,i)}}})],1)}),0),t._v(" "),o("span",{staticClass:"add-goal-btn",on:{click:t.addGoal}},[o("i",{staticClass:"el-icon-plus"}),t._v("添加目标")])])],1),t._v(" "),o("div",{staticClass:"create-page_body-footer"},[o("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.save("form")}}},[t._v("保存并发布")])],1)],1)])])},staticRenderFns:[]};var c=o("C7Lr")(r,l,!1,function(t){o("oycL")},null,null);e.default=c.exports}});
//# sourceMappingURL=111.df2e85a505e18682a3bc.js.map