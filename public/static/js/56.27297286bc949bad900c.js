webpackJsonp([56],{ZcMb:function(e,t){},cPkx:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={name:"AddQuestionnaire",components:{},data:function(){return{pageTitle:["问卷调查","新建问卷"],entryType:this.$route.query.entryType,id:this.$route.query.id||"",form:{classifyId:"",formName:"",templateId:void 0},classifyOptions:[],rules:{classifyId:[{required:!0,message:"请选择问卷类型",trigger:"blur"}],formName:[{required:!0,message:"请输入问卷名称",trigger:"blur"}]},api:{classify:"/form/rest/FormClassifyBusiness/listAll/v1",save:{new:"/form/rest/FormMainBaseBusiness/add/v1",template:"/form/rest/FormTemplateMainBaseBusiness/add/v1",copyTemplate:"/form/rest/FormMainBaseBusiness/addByTemplate/v1",edit:"/form/rest/FormMainBaseBusiness/displayQuality/v1"}}}},created:function(){this.form.classifyId=this.$route.query.classifyId||"",this.form.formName=this.$route.query.title||"",this.classifyAll()},mounted:function(){},methods:{classifyAll:function(){var e=this;this.$post(this.api.classify).then(function(t){200===t.code&&(e.classifyOptions=t.data)})},create:function(e){var t=this;this.$refs[e].validate(function(e){e&&t.userAdd()})},userAdd:function(){var e=this,t=this.api.save[this.entryType];"copyTemplate"===this.entryType&&(this.form.templateId=this.id),"edit"===this.entryType&&(this.form.formId=this.$route.query.id),this.$post(t,this.form).then(function(t){200===t.code?(e.$notify.success({title:"success",duration:1500,message:"保存成功"}),setTimeout(function(){e.$router.push({path:"/evaluationAndFeedback/editQuestionnaire",query:{id:t.data.id,entryType:"template"===e.entryType?"template":"new"}})},800)):e.$notify.error({title:"error",duration:1500,message:t.msg})})}}},r={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"center"},[s("div",{staticClass:"center_breadcrumb"},[s("crumb",{attrs:{data:e.pageTitle}})],1),e._v(" "),s("div",{staticClass:"center_content"},[s("div",{staticClass:"table-container add-questionnaire"},[s("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[s("p",{staticClass:"small-title-tip"},[e._v("问卷基础信息")]),e._v(" "),s("el-form-item",{attrs:{label:"问卷类型",prop:"classifyId"}},[s("el-select",{attrs:{placeholder:"请选择问卷类型"},model:{value:e.form.classifyId,callback:function(t){e.$set(e.form,"classifyId",t)},expression:"form.classifyId"}},e._l(e.classifyOptions,function(e){return s("el-option",{key:e.id,attrs:{label:e.classifyName,value:e.id}})}),1)],1),e._v(" "),s("el-form-item",{attrs:{label:"问卷名称",prop:"formName"}},[s("el-input",{attrs:{placeholder:"请输入问卷名称"},model:{value:e.form.formName,callback:function(t){e.$set(e.form,"formName",t)},expression:"form.formName"}})],1)],1),e._v(" "),s("div",{staticClass:"add-questionnaire_footer"},[s("button",{staticClass:"el-button set-btn",attrs:{type:"button"},on:{click:function(t){return e.create("form")}}},[s("span",[e._v(e._s("copyTemplate"===e.entryType?"编辑问卷":"创建问卷"))])])])],1)])])},staticRenderFns:[]};var a=s("C7Lr")(i,r,!1,function(e){s("ZcMb")},null,null);t.default=a.exports}});
//# sourceMappingURL=56.27297286bc949bad900c.js.map