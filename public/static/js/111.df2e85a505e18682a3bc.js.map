{"version":3,"sources":["webpack:///src/views/trainingProgram/trainingObjectiveCreate.vue","webpack:///./src/views/trainingProgram/trainingObjectiveCreate.vue?1a22","webpack:///./src/views/trainingProgram/trainingObjectiveCreate.vue"],"names":["trainingObjectiveCreate","name","components","Editor","data","pageName","pageTitleArr","type","this","$route","query","id","titlebarShow","versionOptions","introduction","form","versionId","content","goals","code","undefined","explain","rules","validator","rule","value","callback","num","length","forEach","item","Error","trigger","created","pageTitle","mounted","versionAll","goalInfo","computed","titleType","methods","_this","url","trainingProgramApi","$get","then","res","status","label","$notify","error","title","duration","message","catch","err","console","log","_this2","arr","map","titlebar","addGoal","push","goalsDel","vo","index","goalSuDel","success","splice","save","formName","_this3","$refs","validate","valid","formData","JSON","parse","stringify_default","localStorage","getItem","userAdd","userEdit","_this4","goalAdd","$post","setTimeout","$router","_this5","goalEdit","$put","goalId","_this6","$deletes","trainingProgram_trainingObjectiveCreate","render","_vm","_h","$createElement","_c","_self","staticClass","_v","attrs","icon-class","size","_s","on","click","$event","stopPropagation","staticStyle","padding-bottom","box-sizing","_l","key","domProps","textContent","_e","padding","ref","model","label-width","display","prop","placeholder","$$v","$set","expression","upload-url","input-content","margin-right","disabled","slot","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/111.df2e85a505e18682a3bc.js","sourcesContent":["<template>\r\n <div class=\"create-page\">\r\n     <div class=\"create-page_breadcrumb\">\r\n        <Crumb/>\r\n    </div>\r\n    <div class=\"create-page_content\">\r\n        <div class=\"create-page_title\">\r\n            <div class=\"create-page_title-font\">\r\n                <SvgIcon icon-class=\"iconyijianfankui\" size=\"17px\"></SvgIcon>\r\n                <span>{{pageName}}</span>\r\n            </div>\r\n            <div @click.stop=\"titlebar\" class=\"create-page_title-tips\">\r\n                <i class=\"el-icon-question question\"></i>\r\n                <SvgIcon icon-class=\"iconshuoming\"></SvgIcon>\r\n                <div v-if=\"titlebarShow\" class=\"titlebar\">\r\n                    <div class=\"titlebar_header\"><i @click.stop=\"titlebarShow = false\" class=\"el-icon-close\"></i></div>\r\n                    <div class=\"titlebar_body\" style=\"padding-bottom: 10px;box-sizing: border-box;\">\r\n                        <h6>说明</h6>\r\n                        <p v-for=\"(vo,index) in explain\" :key=\"index\" v-text=\"vo\"></p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"create-page_body\" style=\"padding: 20px 20px 100px 20px\">\r\n            <el-form :model=\"form\" :rules=\"rules\" ref=\"form\" label-width=\"120px\">\r\n                <el-form-item label=\"培养方案版本:\" prop=\"versionId\" style=\"display: none\">\r\n                 <el-select v-model=\"form.versionId\" placeholder=\"请选择\">\r\n                        <el-option\r\n                        v-for=\"item in versionOptions\"\r\n                        :key=\"item.id\"\r\n                        :label=\"item.label\"\r\n                        :value=\"item.id\">\r\n                        </el-option>\r\n                    </el-select>\r\n                </el-form-item>\r\n                <el-form-item label=\"培养目标:\" prop=\"content\">\r\n                    <editor \r\n                        upload-url=\"api\"\r\n                        v-model=\"form.content\"\r\n                        :input-content=\"introduction\"/>\r\n                </el-form-item>\r\n                <el-form-item label=\"详细目标:\" prop=\"goals\">\r\n                    <!-- <span  class=\"add-goal-btn\"></span> -->\r\n                    <div class=\"goal-content\" >\r\n                        <p v-for=\"(vo,index) in form.goals\" :key=\"index\">\r\n                            <el-input disabled class=\"goal-order\" style=\"margin-right: 8px;\"><template slot=\"prepend\">{{vo.code}}</template></el-input>\r\n                            <el-input\r\n                                type=\"textarea\"\r\n                                class=\"goal-content_textarea\"\r\n                                placeholder=\"请输入内容\"\r\n                                v-model=\"vo.content\">\r\n                            </el-input>\r\n                            <i @click=\"goalsDel(vo,index)\" class=\"el-icon-circle-close del-icon\"></i>\r\n                        </p>\r\n                    </div>\r\n                    <span @click=\"addGoal\" class=\"add-goal-btn\"><i class=\"el-icon-plus\"></i>添加目标</span>\r\n                </el-form-item>\r\n            </el-form>\r\n            <div class=\"create-page_body-footer\">\r\n                <el-button @click=\"save('form')\" type=\"primary\">保存并发布</el-button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n </div>\r\n</template>\r\n\r\n<script>\r\nimport Editor from '../components/Editor';\r\nimport trainingProgramApi from '@/api/trainingProgramApi';\r\nexport default {\r\n name: 'TrainingObjectiveCreate',\r\n components: {Editor},\r\n data() {\r\n    const checkGoals = (rule, value, callback) => {\r\n        let num=0;\r\n        if(value.length > 0) {\r\n            value.forEach(item => {\r\n                if(!item.content){\r\n                     num++\r\n                }\r\n            })\r\n            if(num!==0){\r\n                 return callback(new Error('请输入目标内容'));\r\n            }else{\r\n               callback();\r\n            }\r\n           \r\n        } else {\r\n            callback();\r\n        }\r\n    };\r\n return {\r\n     pageName:'培养目标',\r\n     pageTitleArr:[],\r\n     type:this.$route.query.type,\r\n     id:this.$route.query.id,\r\n     titlebarShow:false,\r\n     versionOptions:[],\r\n     introduction:'',\r\n     form: {\r\n        versionId: '',\r\n        content: '',\r\n        goals:[{\r\n            content:'',\r\n            code:1,\r\n        }],\r\n        id:undefined\r\n    },\r\n    explain:[\r\n        '（1）有公开的、符合学校定位的、适应社会经济发展需要的培养目标。',\r\n        '     需要说明的情况：',\r\n        '     给出本专业培养目标的完整文字表述，说明毕业生就业的专业领域、职业特征、职业定位以及应该具备的职业能力。',\r\n        '     分别阐述说明专业培养目标与学校定位、专业人才培养定位、社会经济发展需要的关系。',\r\n        '     培养目标公开的渠道，以及学生、教师和社会了解和认知情况。',\r\n        '     需要提供的支撑材料：专业培养目标制定和论证文件记录（附件中提供列表说明）学校定位和专业人才培养定位的相关文件专业人才培养与社会经济发展需求分析',\r\n        '（2）定期评价培养目标的合理性并根据评价结果对培养目标进行修订，评价与修订过程有行业或企业专家参与。',\r\n        '     需要说明的情况：',\r\n        '     培养目标合理性评价的制度和措施。',\r\n        '     培养目标合理性评价的主要内容。',\r\n        '     评价内容和方法，包括基础信息的种类、收集方法、收集对象和处理方法，以及评价结果的形成过程等。',\r\n        '     最近一次的评价情况和评价结果。',\r\n        '     当前执行的培养目标修订制度，包括修订周期、修订程序、参与人员以及主要执行人。',\r\n        '     最近一次修订情况，包括修订的时间、内容和依据等，应说明培养目标合理性评价结果在修订过程中发挥的作用等。',\r\n        '     行业企业专家参与培养目标修订的有关规定，以及在最近一次修订工作中行业企业专家发挥的作用。',\r\n        '     需要提供的支撑材料：培养目标合理性评价制度文件近3年进行的培养目标合理性评价原始材料（附件中提供列表说明）培养方案修订制度近3年培养方案修订原始材料（附件中提供列表说明）'\r\n    ],\r\n    rules:{\r\n        // versionId:[\r\n        //     {\r\n        //       required: true,\r\n        //       message: '请选择培养方案版本',\r\n        //       trigger: 'blur'\r\n        //     }\r\n        // ],\r\n        goals:[\r\n            {\r\n              validator: checkGoals,\r\n              trigger: 'blur'\r\n            } \r\n        ]\r\n    },\r\n }\r\n },\r\n created(){\r\n    this.pageName=this.$route.query.pageTitle[1]\r\n    this.pageTitleArr=[this.$route.query.pageTitle[0],`${this.$route.query.pageTitle[1]}${this.$route.query.type === 'add' ? '新增' : '编辑'}`]\r\n },\r\n mounted(){\r\n     this.versionAll()\r\n     if(this.type === 'edit'){\r\n         this.goalInfo();\r\n     }\r\n },\r\n computed:{\r\n     titleType(){\r\n         return this.$route.query.type === 'add' ? '新增' : '编辑'\r\n     }\r\n },\r\n methods:{\r\n     versionAll(){\r\n         const url =trainingProgramApi.versionAll;\r\n         this.$get(url).then(res =>{\r\n             if(res.status === 1){\r\n                 res.data.forEach(item =>{\r\n                     item.label=item.name;\r\n                 })\r\n                this.versionOptions=res.data;\r\n             }else{\r\n               this.$notify.error({\r\n                title: 'error',\r\n                duration:1500,\r\n                message: res.message\r\n                })\r\n             }\r\n         }).catch(err =>{\r\n            console.log(err)\r\n         })\r\n     },\r\n     goalInfo(){\r\n         const url =trainingProgramApi.goalInfo({\r\n              id:this.id\r\n         });\r\n         this.$get(url).then(res =>{\r\n             if(res.status === 1){\r\n                this.introduction=res.data.content;\r\n               const arr=res.data.goals.map(item =>{\r\n                    return {\r\n                        content:item.content,\r\n                        code:+item.code,\r\n                        id:item.id\r\n                    }\r\n                })              \r\n               this.form={\r\n                    versionId: res.data.versionId,\r\n                    content: res.data.content,\r\n                    goals:arr\r\n                }\r\n\r\n             }else{\r\n               this.$notify.error({\r\n                title: 'error',\r\n                duration:1500,\r\n                message: res.message\r\n                })\r\n             }\r\n         }).catch(err =>{\r\n            console.log(err)\r\n         })\r\n     },\r\n     titlebar(){\r\n        this.titlebarShow=true;\r\n     },\r\n     addGoal(){\r\n        this.form.goals.push({\r\n            content:'',\r\n            code: this.form.goals.length +1\r\n        })\r\n     },\r\n     goalsDel(vo, index){\r\n       if(vo.id){\r\n          this.goalSuDel(vo.id, index)\r\n       }else{\r\n          this.$notify.success({\r\n            title: 'success',\r\n            duration:1500,\r\n            message:'删除成功'\r\n            \r\n            })\r\n          this.form.goals.splice(index, 1)\r\n       }\r\n     },\r\n     save(formName){\r\n          this.$refs[formName].validate((valid) => {\r\n          if (valid) {\r\n                const formData=JSON.parse(JSON.stringify(this.form))\r\n                formData.goals=this.form.goals.length === 1 && this.form.goals[0].content === '' ? [] : this.form.goals;\r\n                formData.id= this.$route.query.type === 'add' ? undefined : this.id;\r\n                formData.versionId = localStorage.getItem('versionId')\r\n                if(this.type === 'add'){\r\n                      this.userAdd(formData)      \r\n                }else{\r\n                    this.userEdit(formData)\r\n                }                      \r\n          } \r\n        });\r\n     },\r\n     userAdd(formData){\r\n        const url =trainingProgramApi.goalAdd;\r\n       this.$post(url,formData)\r\n            .then( res => {\r\n                    if(res.status === 1){\r\n                        this.$notify.success({\r\n                            title: 'success',\r\n                            duration:1500,\r\n                            message: res.message                           \r\n                            })\r\n                       setTimeout(() => {\r\n                            this.$router.push('/trainingProgram/trainingObjective');      \r\n                       }, 800);\r\n                    }else{\r\n                        this.$notify.error({\r\n                        title: 'error',\r\n                        duration:1500,\r\n                        message: res.message\r\n                    })\r\n                    }\r\n                    \r\n            }).catch(err =>{\r\n                 console.log(err)\r\n            })\r\n     },\r\n     userEdit(formData){\r\n        const url =trainingProgramApi.goalEdit;\r\n        this.$put(url,formData)\r\n            .then( res => {\r\n                    if(res.status === 1){\r\n                        this.$notify.success({\r\n                            title: 'success',\r\n                            duration:1500,\r\n                            message: res.message\r\n                            \r\n                            })\r\n                         setTimeout(() => {\r\n                            this.$router.push('/trainingProgram/trainingObjective');      \r\n                       }, 800);\r\n                    }else{\r\n                        this.$notify.error({\r\n                        title: 'error',\r\n                        duration:1500,\r\n                        message: res.message\r\n                    })\r\n                    }\r\n                    \r\n            }).catch(err =>{\r\n                console.log(err)\r\n            })\r\n     },\r\n     goalSuDel(goalId, index){\r\n        const url =trainingProgramApi.goalSuDel({\r\n            id:goalId\r\n        });\r\n        this.$deletes(url)\r\n            .then( res => {\r\n                    if(res.status === 1){\r\n                        this.$notify.success({\r\n                            title: 'success',\r\n                            duration:1500,\r\n                            message: '删除成功'\r\n                            \r\n                            })\r\n                         this.form.goals.splice(index, 1)\r\n                    }else{\r\n                        this.$notify.error({\r\n                        title: 'error',\r\n                        duration:1500,\r\n                        message: res.message\r\n                    })\r\n                    }\r\n                    \r\n            }).catch(err =>{\r\n                console.log(err)\r\n            })\r\n     }\r\n }\r\n}\r\n</script>\r\n\r\n<style lang='scss'>\r\n    @import '../../styles/create.scss';\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/trainingProgram/trainingObjectiveCreate.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"create-page\"},[_c('div',{staticClass:\"create-page_breadcrumb\"},[_c('Crumb')],1),_vm._v(\" \"),_c('div',{staticClass:\"create-page_content\"},[_c('div',{staticClass:\"create-page_title\"},[_c('div',{staticClass:\"create-page_title-font\"},[_c('SvgIcon',{attrs:{\"icon-class\":\"iconyijianfankui\",\"size\":\"17px\"}}),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.pageName))])],1),_vm._v(\" \"),_c('div',{staticClass:\"create-page_title-tips\",on:{\"click\":function($event){$event.stopPropagation();return _vm.titlebar($event)}}},[_c('i',{staticClass:\"el-icon-question question\"}),_vm._v(\" \"),_c('SvgIcon',{attrs:{\"icon-class\":\"iconshuoming\"}}),_vm._v(\" \"),(_vm.titlebarShow)?_c('div',{staticClass:\"titlebar\"},[_c('div',{staticClass:\"titlebar_header\"},[_c('i',{staticClass:\"el-icon-close\",on:{\"click\":function($event){$event.stopPropagation();_vm.titlebarShow = false}}})]),_vm._v(\" \"),_c('div',{staticClass:\"titlebar_body\",staticStyle:{\"padding-bottom\":\"10px\",\"box-sizing\":\"border-box\"}},[_c('h6',[_vm._v(\"说明\")]),_vm._v(\" \"),_vm._l((_vm.explain),function(vo,index){return _c('p',{key:index,domProps:{\"textContent\":_vm._s(vo)}})})],2)]):_vm._e()],1)]),_vm._v(\" \"),_c('div',{staticClass:\"create-page_body\",staticStyle:{\"padding\":\"20px 20px 100px 20px\"}},[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form,\"rules\":_vm.rules,\"label-width\":\"120px\"}},[_c('el-form-item',{staticStyle:{\"display\":\"none\"},attrs:{\"label\":\"培养方案版本:\",\"prop\":\"versionId\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.form.versionId),callback:function ($$v) {_vm.$set(_vm.form, \"versionId\", $$v)},expression:\"form.versionId\"}},_vm._l((_vm.versionOptions),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.label,\"value\":item.id}})}),1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"培养目标:\",\"prop\":\"content\"}},[_c('editor',{attrs:{\"upload-url\":\"api\",\"input-content\":_vm.introduction},model:{value:(_vm.form.content),callback:function ($$v) {_vm.$set(_vm.form, \"content\", $$v)},expression:\"form.content\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"详细目标:\",\"prop\":\"goals\"}},[_c('div',{staticClass:\"goal-content\"},_vm._l((_vm.form.goals),function(vo,index){return _c('p',{key:index},[_c('el-input',{staticClass:\"goal-order\",staticStyle:{\"margin-right\":\"8px\"},attrs:{\"disabled\":\"\"}},[_c('template',{slot:\"prepend\"},[_vm._v(_vm._s(vo.code))])],2),_vm._v(\" \"),_c('el-input',{staticClass:\"goal-content_textarea\",attrs:{\"type\":\"textarea\",\"placeholder\":\"请输入内容\"},model:{value:(vo.content),callback:function ($$v) {_vm.$set(vo, \"content\", $$v)},expression:\"vo.content\"}}),_vm._v(\" \"),_c('i',{staticClass:\"el-icon-circle-close del-icon\",on:{\"click\":function($event){return _vm.goalsDel(vo,index)}}})],1)}),0),_vm._v(\" \"),_c('span',{staticClass:\"add-goal-btn\",on:{\"click\":_vm.addGoal}},[_c('i',{staticClass:\"el-icon-plus\"}),_vm._v(\"添加目标\")])])],1),_vm._v(\" \"),_c('div',{staticClass:\"create-page_body-footer\"},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.save('form')}}},[_vm._v(\"保存并发布\")])],1)],1)])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-1910844f\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/views/trainingProgram/trainingObjectiveCreate.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1910844f\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./trainingObjectiveCreate.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./trainingObjectiveCreate.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./trainingObjectiveCreate.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1910844f\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./trainingObjectiveCreate.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/trainingProgram/trainingObjectiveCreate.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}