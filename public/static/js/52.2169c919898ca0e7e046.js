webpackJsonp([52],{KZGA:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("aA9S"),i=a.n(o),n={components:{Crumb:a("fcG9").a},data:function(){return{icon:"el-icon-refresh",formLabelWidth:"120px",dialogFormVisible:!1,dialogVisible:!1,uploadDisabled:!1,uploadUrl:"",active:1,listQuery:{type:"",name:"",page:1,rows:15},form:{type:"",name:"",contactDepartments:"",contacts:"",contactEmail:"",contactPhone:""},options:[{code:"",value:"全部"},{code:1,value:"用人单位"},{code:2,value:"实习基地"}],options1:[{code:1,value:"用人单位"},{code:2,value:"实习基地"}],tableData:[],total:0,title:"添加企业信息",rules:{type:[{required:!0,message:"请选择企业类型",trigger:"change"}],name:[{required:!0,message:"请输入企业名称",trigger:"blur"}],contactDepartments:[{required:!0,message:"请输入联系部门",trigger:"blur"}],contacts:[{required:!0,message:"请输入联系人",trigger:"blur"}],contactEmail:[{required:!0,message:"请输入联系人邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}],contactPhone:[{required:!0,message:"请输入联系人手机号",trigger:"blur"},{validator:function(t,e,a){""===e?a():/^[1][3,4,5,7,8][0-9]{9}$/.test(e)?a():a(new Error("请输入正确的手机号码"))},trigger:"blur"}]},loading:!1,bodyLoading:!0}},mounted:function(){this.getList(),this.getEnterprise()},methods:{resetListQuery:function(){this.listQuery={type:"",name:"",page:1,rows:15}},getList:function(){var t=this;this.bodyLoading=!0,this.$post("/basic/enterpriseInfo/list",this.listQuery).then(function(e){1===e.status?(t.tableData=e.data,t.total=e.total):t.$notify({title:"提示",message:e.message,type:"error",duration:"2000"}),t.bodyLoading=!1}).catch(function(){t.$notify({title:"提示",message:"获取列表失败请重试!",type:"error",duration:"2000"}),t.bodyLoading=!1})},getEnterprise:function(){var t=this;this.bodyLoading=!0,this.$get("/system/dict/field/enterpriseType").then(function(e){1===e.status?(t.options=i()([],e.data),t.options.unshift({code:"",value:"全部"}),t.options1=i()([],e.data)):t.$notify({title:"提示",message:e.message,type:"error",duration:"2000"}),t.bodyLoading=!1}).catch(function(){t.$notify({title:"提示",message:"获取企业类型失败请重试!",type:"error",duration:"2000"}),t.bodyLoading=!1})},handleAdd:function(){var t=this;this.dialogFormVisible=!0,this.title="添加企业信息",this.$nextTick(function(){t.form={type:"",name:"",contactDepartments:"",contacts:"",contactEmail:"",contactPhone:""},t.$refs.form.resetFields()})},handleEdit:function(t){var e=this;this.dialogFormVisible=!0,this.title="编辑企业信息",this.form={id:t.id,type:t.type,name:t.name,contactDepartments:t.contactDepartments,contacts:t.contacts,contactEmail:t.contactEmail,contactPhone:t.contactPhone},this.$nextTick(function(){e.$refs.form.clearValidate()})},handleDelete:function(t){var e=this;this.$confirm("此操作将删除该企业信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$post("/basic/enterpriseInfo/del/"+t.id).then(function(t){1===t.status?(e.$notify({title:"提示",message:t.message,type:"success",duration:"2000"}),e.listQuery.page=1,e.getList()):e.$notify({title:"提示",message:t.message,type:"error",duration:"2000"})}).catch(function(){e.$notify({title:"提示",message:"删除失败！请重试！",type:"error",duration:"2000"})})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},handleSizeChange:function(t){this.listQuery.rows=t,this.getList()},handleCurrentChange:function(t){this.listQuery.page=t,this.getList()},submitForm:function(t){var e=this;this.loading=!0,this.$refs[t].validate(function(t){if(!t)return e.loading=!1,!1;e.$post("/basic/enterpriseInfo/add",e.form).then(function(t){1===t.status?(e.$notify({title:"提示",message:t.message,type:"success",duration:"2000"}),e.dialogFormVisible=!1,e.resetListQuery(),e.getList()):e.$notify({title:"提示",message:t.message,type:"error",duration:"2000"}),e.loading=!1}).catch(function(){e.loading=!1})})},editForm:function(t){var e=this;this.loading=!0,this.$refs[t].validate(function(t){if(!t)return e.loading=!1,!1;e.$post("/basic/enterpriseInfo/edit",e.form).then(function(t){1===t.status?(e.$notify({title:"提示",message:t.message,type:"success",duration:"2000"}),e.dialogFormVisible=!1,e.resetListQuery(),e.getList()):e.$notify({title:"提示",message:t.message,type:"error",duration:"2000"}),e.loading=!1}).catch(function(){e.loading=!1})})}}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading.body",value:t.bodyLoading,expression:"bodyLoading",modifiers:{body:!0}}],staticClass:"enterpriseInformation"},[a("div",{staticClass:"mainContainer"},[a("crumb",{staticStyle:{padding:"0 5px"}},[a("div",{staticClass:"new--btn",attrs:{slot:"right"},on:{click:t.handleAdd},slot:"right"},[t._v("+ 新建")])]),t._v(" "),a("div",{staticClass:"listQuery"},[a("el-form",{ref:"listQuery",attrs:{model:t.listQuery,"label-width":"90px"}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"企业类型："}},[a("el-select",{staticStyle:{width:"90%"},attrs:{placeholder:"请选择企业类型"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getList(e)}},model:{value:t.listQuery.type,callback:function(e){t.$set(t.listQuery,"type",e)},expression:"listQuery.type"}},t._l(t.options,function(t){return a("el-option",{key:t.code,attrs:{label:t.value,value:t.code}})}),1)],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"企业名称："}},[a("el-input",{staticStyle:{width:"90%"},attrs:{placeholder:"请输入企业名称"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getList(e)}},model:{value:t.listQuery.name,callback:function(e){t.$set(t.listQuery,"name",e)},expression:"listQuery.name"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"search--btn",on:{click:t.getList}},[t._v("搜索")])])],1)],1)],1),t._v(" "),a("div",{staticClass:"tableBody"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,stripe:""}},[a("el-table-column",{attrs:{prop:"name",label:"企业名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"typeName",label:"企业类型"}}),t._v(" "),a("el-table-column",{attrs:{prop:"contactDepartments",label:"联系部门"}}),t._v(" "),a("el-table-column",{attrs:{prop:"contacts",label:"部门联系人"}}),t._v(" "),a("el-table-column",{attrs:{prop:"contactPhone",label:"联系人手机号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"contactEmail",label:"联系人邮箱"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleEdit(e.row)}}},[a("SvgIcon",{attrs:{"icon-class":"iconbianji1"}}),t._v("  编辑\n            ")],1),t._v(" "),a("el-button",{staticStyle:{color:"#ff5858"},attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleDelete(e.row)}}},[a("SvgIcon",{attrs:{"icon-class":"iconshanchu"}}),t._v("  删除\n            ")],1)]}}])})],1)],1),t._v(" "),a("div",{staticClass:"pagination"},[a("div",{staticClass:"block"},[a("el-pagination",{attrs:{background:"","current-page":t.listQuery.page,"page-sizes":[15,30,40,50],"page-size":t.listQuery.rows,layout:"prev, pager, next, jumper, sizes, total",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])],1),t._v(" "),a("el-dialog",{attrs:{title:t.title,visible:t.dialogFormVisible,"close-on-click-modal":!1,width:"35%"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"130px"}},[a("el-form-item",{attrs:{label:"企业类型：",prop:"type"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择企业类型",size:"small"},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},t._l(t.options1,function(t){return a("el-option",{key:t.code,attrs:{label:t.value,value:t.code}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"企业名称：",prop:"name"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入企业名称",size:"small"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"联系部门：",prop:"contactDepartments"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入联系部门",size:"small"},model:{value:t.form.contactDepartments,callback:function(e){t.$set(t.form,"contactDepartments",e)},expression:"form.contactDepartments"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"联系人：",prop:"contacts"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入联系人",size:"small"},model:{value:t.form.contacts,callback:function(e){t.$set(t.form,"contacts",e)},expression:"form.contacts"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"联系人邮箱：",prop:"contactEmail"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入联系人邮箱",size:"small"},model:{value:t.form.contactEmail,callback:function(e){t.$set(t.form,"contactEmail",e)},expression:"form.contactEmail"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"联系人手机号：",prop:"contactPhone"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"联系人手机号",size:"small"},model:{value:t.form.contactPhone,callback:function(e){t.$set(t.form,"contactPhone",e)},expression:"form.contactPhone"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:"添加企业信息"===t.title,expression:"title==='添加企业信息'"}],attrs:{type:"primary",loading:t.loading},on:{click:function(e){return t.submitForm("form")}}},[t._v("确 定")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:"添加企业信息"!==t.title,expression:"title!=='添加企业信息'"}],attrs:{type:"primary",loading:t.loading},on:{click:function(e){return t.editForm("form")}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var l=a("C7Lr")(n,s,!1,function(t){a("Yf5D")},null,null);e.default=l.exports},Yf5D:function(t,e){}});
//# sourceMappingURL=52.2169c919898ca0e7e046.js.map