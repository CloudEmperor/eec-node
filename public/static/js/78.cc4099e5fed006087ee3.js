webpackJsonp([78],{"W5+x":function(e,t){},k5KT:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={components:{crumb:a("fcG9").a},data:function(){return{dialogFormVisible:!1,formLabelWidth:"140px",falg:!1,falg1:!1,currentPage1:1,total:0,pageSize:15,pageNum:1,tianjia:"",options:[{code:1,value:"学院"},{code:2,value:"部门"}],form:{name:"",code:"",intro:"",creatorVal:""},rules:{code:[{required:!0,message:"学院/部门代码不能为空",trigger:"blur"}],name:[{required:!0,message:"学院/部门名称不能为空",trigger:"blur"}],intro:[{required:!0,message:"学院/部门简介不能为空",trigger:"blur"}],creatorVal:[{required:!0,message:"学院/部门类型不能为空",trigger:"blur"}]},formInline:{user:""},tableData:[],loading:!0,tableData1:[]}},methods:{academyType:function(){var e=this;this.$get("system/dict/field/academyType").then(function(t){e.options=t.data})},onSubmit:function(){var e=this,t={keywords:this.formInline.user,rows:this.pageSize,page:this.currentPage1};this.$post("/basic/academy/list",t).then(function(t){1==t.status&&(e.loading=!1,e.tableData1=t.data,e.total=t.total)})},academyAdd:function(){var e=this,t=this.form.name,a=this.form.code,o=this.form.intro,i=this.form.creatorVal;this.$post("/basic/academy/add",{name:t,code:a,intro:o,academyType:i}).then(function(t){1==t.status?(e.$notify({message:"新增成功",type:"success"}),e.tableData1.unshift(t.data),e.onSubmit()):e.$notify({message:t.message,type:"warning"})})},handleEdit:function(e,t){this.tianjia="编辑学院/部门",this.falg1=!1,this.falg=!0,this.dialogFormVisible=!0,this.form.name=t.name,this.form.code=t.code,this.form.intro=t.intro,this.form.creatorVal=t.academyType,this.form.id=t.id},close:function(){this.tianjia="添加学院/部门",this.falg1=!0,this.falg=!1,this.dialogFormVisible=!0,this.form.name="",this.form.code="",this.form.intro="",this.form.creatorVal=""},seccons:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.academyAdd(),t.dialogFormVisible=!1,t.onSubmit()})},seccons1:function(e){var t=this;this.$refs[e].validate(function(a){if(!a)return console.log("error submit!!"),!1;var o=t.form.name,i=t.form.code,n=t.form.intro,r=t.form.id,s=t.form.creatorVal;t.$put("/basic/academy/edit",{intro:n,name:o,code:i,id:r,academyType:s}).then(function(a){1==a.status?(t.onSubmit(),t.$notify.success({title:"success",message:"编辑成功"}),t.$refs[e].resetFields(),t.dialogFormVisible=!1):t.$notify.warning({title:"warning",message:a.message})})})},resetForm:function(e){this.$refs[e].resetFields(),this.dialogFormVisible=!1,this.form={}},handleClose:function(){this.$refs.ruleForm.resetFields(),this.dialogFormVisible=!1,this.form={}},handleDelete:function(e,t){var a=this;this.$confirm("确定删除该信息?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$deletes("/basic/academy/del/"+t.id).then(function(e){1==e.status?(a.$notify.success({title:"success",message:"删除成功"}),a.onSubmit()):0==e.status&&a.$notify.warning({title:"warning",message:e.message})})}).catch(function(){a.$notify({type:"info",message:"已取消删除"})})},indexMethod:function(e){return 1*e},handleSizeChange:function(e){this.pageSize=e,this.onSubmit()},handleCurrentChange:function(e){this.currentPage1=e,this.onSubmit()}},mounted:function(){this.onSubmit()}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"CollegeInformation padding students"},[a("el-dialog",{attrs:{title:e.tianjia,visible:e.dialogFormVisible,"before-close":e.handleClose,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"ruleForm",attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{label:"学院/部门代码：","label-width":e.formLabelWidth,prop:"code"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入学院/部门代码"},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"学院/部门类型：","label-width":e.formLabelWidth,prop:"creatorVal"}},[a("el-select",{attrs:{placeholder:"请选择学院/部门类型",filterable:""},model:{value:e.form.creatorVal,callback:function(t){e.$set(e.form,"creatorVal",t)},expression:"form.creatorVal"}},e._l(e.options,function(e){return a("el-option",{key:e.code,attrs:{label:e.value,value:e.code}})}),1)],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"学院/部门名称：","label-width":e.formLabelWidth,prop:"name"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入学院/部门名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"学院/部门简介：","label-width":e.formLabelWidth,prop:"intro"}},[a("el-input",{attrs:{"auto-complete":"off",type:"textarea",rows:4,placeholder:"请输入学院/部门简介"},model:{value:e.form.intro,callback:function(t){e.$set(e.form,"intro",t)},expression:"form.intro"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("取 消")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.falg1,expression:"falg1"}],attrs:{type:"primary"},on:{click:function(t){return e.seccons("ruleForm")}}},[e._v("确 定")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.falg,expression:"falg"}],attrs:{type:"primary"},on:{click:function(t){return e.seccons1("ruleForm")}}},[e._v("确 定")])],1)],1),e._v(" "),a("crumb",{staticStyle:{padding:"0 5px"}},[a("div",{staticClass:"new--btn",attrs:{slot:"right"},on:{click:e.close},slot:"right"},[e._v("+ 新建")])]),e._v(" "),a("div",{staticClass:"CollegeInformation-tab"},[a("div",{staticClass:"CollegeInformation-inp"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{attrs:{label:"学院/部门搜索："}},[a("el-input",{attrs:{placeholder:"学院/部门名称"},model:{value:e.formInline.user,callback:function(t){e.$set(e.formInline,"user",t)},expression:"formInline.user"}})],1),e._v(" "),a("el-form-item",[a("div",{staticClass:"search--btn",on:{click:e.onSubmit}},[e._v("搜索")])])],1)],1),e._v(" "),[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.tableData1,stripe:""}},[a("el-table-column",{attrs:{label:"学院/部门代码"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{"margin-left":"5px"}},[e._v(e._s(t.row.code))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"学院/部门名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{"margin-left":"5px"}},[e._v(e._s(t.row.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"学院/部门类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.academyType?a("span",{staticStyle:{"margin-left":"5px"}},[e._v(e._s("学院"))]):a("span",{staticStyle:{"margin-left":"5px"}},[e._v(e._s("部门"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"学院/部门简介",width:"540"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{placement:"top-start",width:"600",content:t.row.intro}},[a("div",{attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(t.row.intro))])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[a("SvgIcon",{attrs:{"icon-class":"iconbianji1"}}),e._v("  编辑\n            ")],1),e._v(" "),a("el-button",{staticStyle:{color:"#ff5858"},attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[a("SvgIcon",{attrs:{"icon-class":"iconshanchu"}}),e._v("  删除\n            ")],1)]}}])})],1)]],2),e._v(" "),a("div",[[a("div",{staticClass:"block"},[a("el-pagination",{attrs:{background:"","current-page":e.currentPage1,"page-sizes":[15,30,40,50],"page-size":e.pageSize,layout:"prev, pager, next, jumper, sizes, total",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)]],2)],1)},staticRenderFns:[]};var n=a("C7Lr")(o,i,!1,function(e){a("W5+x")},null,null);t.default=n.exports}});
//# sourceMappingURL=78.cc4099e5fed006087ee3.js.map